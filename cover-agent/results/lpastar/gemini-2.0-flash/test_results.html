
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Test Results</title>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-okaidia.min.css" rel="stylesheet" />
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                margin: 20px;
            }
            table {
                border-collapse: collapse;
                width: 100%;
                box-shadow: 0 2px 3px rgba(0,0,0,0.1);
            }
            th, td {
                border: 1px solid #ddd;
                text-align: left;
                padding: 8px;
            }
            th {
                background-color: #f2f2f2;
            }
            tr:nth-child(even) {
                background-color: #f9f9f9;
            }
            .status-pass {
                color: green;
            }
            .status-fail {
                color: red;
            }
            pre {
                background-color: #282c34 !important;
                color: #ffffff !important;
                padding: 10px;
                border-radius: 5px;
                overflow-x: auto;
                white-space: pre-wrap;
                font-family: 'Courier New', Courier, monospace;
                font-size: 1.1em;  /* Slightly larger font size */
            }
        </style>
    </head>
    <body>
        <table>
            <tr>
                <th>Status</th>
                <th>Reason</th>
                <th>Exit Code</th>
                <th>Language</th>
                <th>Modified Test File</th>
                <th>Details</th>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-added">+ import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazypq_top_empty():</span>
<span class="diff-added">+     from app import LazyPQ</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-added">+         pq.top()</span>
<span class="diff-added">+     assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 3 items

test_app.py ...                                                          [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     47    82%
test_app.py      31      0   100%
---------------------------------
TOTAL           289     47    84%
Coverage XML written to file coverage.xml


============================== 3 passed in 0.06s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_lazypq_top_empty():
    from app import LazyPQ
    pq = LazyPQ()
    with pytest.raises(KeyError) as excinfo:
        pq.top()
    assert "top from empty priority queue" in str(excinfo.value)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">import pytest
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-added">+ def test_lazypq_pop_empty():</span>
<span class="diff-added">+     from app import LazyPQ</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-added">+         pq.pop()</span>
<span class="diff-added">+     assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 4 items

test_app.py ....                                                         [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     46    82%
test_app.py      37      0   100%
---------------------------------
TOTAL           295     46    84%
Coverage XML written to file coverage.xml


============================== 4 passed in 0.05s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_lazypq_pop_empty():
    from app import LazyPQ
    pq = LazyPQ()
    with pytest.raises(KeyError) as excinfo:
        pq.pop()
    assert "pop from empty priority queue" in str(excinfo.value)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">import pytest
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-added">+ def test_dynamic_obstacles():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+ </span>
<span class="diff-added">+     # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-added">+     time_discovered_obstacles = {</span>
<span class="diff-added">+         1: [Node(2, 2)]</span>
<span class="diff-added">+     }</span>
<span class="diff-added">+ </span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-added">+     planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+ </span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 5 items

test_app.py .....                                                        [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     33    87%
test_app.py      50      0   100%
---------------------------------
TOTAL           308     33    89%
Coverage XML written to file coverage.xml


============================== 5 passed in 0.07s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_dynamic_obstacles():
    from app import LPAStar, Node
    # Create a 5x5 grid with no obstacles initially.
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)

    # Define dynamic obstacles that appear at time step 1.
    time_discovered_obstacles = {
        1: [Node(2, 2)]
    }

    planner = LPAStar(grid)
    planner.set_dynamic_obstacles(False, time_discovered_obstacles)
    planner.max_time_step = 2  # Run for a couple of time steps.
    found, path = planner.plan(start, goal)

    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-added">+ def test_no_valid_predecessor():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-added">+     grid = [[0, 1, 0],</span>
<span class="diff-added">+             [0, 1, 0],</span>
<span class="diff-added">+             [0, 0, 0]]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 2)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 5</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     # The path may not reach the goal, but should still return something.</span>
<span class="diff-added">+     # In this case, the path will likely be cut short.</span>
<span class="diff-added">+     assert len(path) > 0</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 6 items

test_app.py ......                                                       [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     33    87%
test_app.py      60      0   100%
---------------------------------
TOTAL           318     33    90%
Coverage XML written to file coverage.xml


============================== 6 passed in 0.07s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_no_valid_predecessor():
    from app import LPAStar, Node
    # Create a 3x3 grid with obstacles blocking the direct path.
    grid = [[0, 1, 0],
            [0, 1, 0],
            [0, 0, 0]]
    start = Node(0, 0)
    goal = Node(2, 2)
    planner = LPAStar(grid)
    planner.max_time_step = 5
    found, path = planner.plan(start, goal)
    assert found is True
    # The path may not reach the goal, but should still return something.
    # In this case, the path will likely be cut short.
    assert len(path) > 0
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-added">+ def test_random_obstacles():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+ </span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-added">+     planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+ </span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 6 items

test_app.py ......                                                       [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     28    89%
test_app.py      62      0   100%
---------------------------------
TOTAL           320     28    91%
Coverage XML written to file coverage.xml


============================== 6 passed in 0.06s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_random_obstacles():
    from app import LPAStar, Node
    # Create a 5x5 grid with no obstacles initially.
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)

    planner = LPAStar(grid)
    planner.set_dynamic_obstacles(create_random_obstacles=True)
    planner.max_time_step = 3  # Run for a few time steps.
    found, path = planner.plan(start, goal)

    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_obstacle_s2():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid.</span>
<span class="diff-added">+     grid = [[0 for _ in range(3)] for _ in range(3)]</span>
<span class="diff-added">+     # Place an obstacle at (1, 0).</span>
<span class="diff-added">+     grid[1][0] = 1</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 0)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 7 items

test_app.py ..F....                                                      [100%]

=================================== FAILURES ===================================
____________________________ test_cost_obstacle_s2 _____________________________

    def test_cost_obstacle_s2():
        from app import LPAStar, Node
        # Create a 3x3 grid.
        grid = [[0 for _ in range(3)] for _ in range(3)]
        # Place an obstacle at (1, 0).
        grid[1][0] = 1
        start = Node(0, 0)
        goal = Node(2, 0)
        planner = LPAStar(grid)
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
>       assert found is False
E       assert True is False

test_app.py:59: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0
1 0 0
0 0 0

3 3 2
1 3 2
3 3 2

Node(2, 0) cost: 0.0, id: 2000, pid: 7
Node(2, 1) cost: 0.0, id: 7, pid: 4
Node(1, 1) cost: 0.0, id: 4, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 2
1 3 2
3 3 2


---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     27    90%
test_app.py      73      1    99%
---------------------------------
TOTAL           331     28    92%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_cost_obstacle_s2 - assert True is False
========================= 1 failed, 6 passed in 0.07s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_obstacle_s2():
    from app import LPAStar, Node
    # Create a 3x3 grid.
    grid = [[0 for _ in range(3)] for _ in range(3)]
    # Place an obstacle at (1, 0).
    grid[1][0] = 1
    start = Node(0, 0)
    goal = Node(2, 0)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_no_valid_motion():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid.</span>
<span class="diff-added">+     grid = [[0 for _ in range(3)] for _ in range(3)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(1, 1)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     # Override motions to have no valid motions.</span>
<span class="diff-added">+     planner.motions = []</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 7 items

test_app.py ..F....                                                      [100%]

=================================== FAILURES ===================================
__________________________ test_cost_no_valid_motion ___________________________

    def test_cost_no_valid_motion():
        from app import LPAStar, Node
        # Create a 3x3 grid.
        grid = [[0 for _ in range(3)] for _ in range(3)]
        start = Node(0, 0)
        goal = Node(1, 1)
        planner = LPAStar(grid)
        # Override motions to have no valid motions.
        planner.motions = []
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
>       assert found is False
E       assert True is False

test_app.py:59: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0
0 0 0
0 0 0

3 3 2
2 3 2
2 2 0

Node(1, 1) cost: 0.0, id: 1001, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 2
2 3 2
2 2 0


---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     27    90%
test_app.py      73      1    99%
---------------------------------
TOTAL           331     28    92%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_cost_no_valid_motion - assert True is False
========================= 1 failed, 6 passed in 0.11s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_no_valid_motion():
    from app import LPAStar, Node
    # Create a 3x3 grid.
    grid = [[0 for _ in range(3)] for _ in range(3)]
    start = Node(0, 0)
    goal = Node(1, 1)
    planner = LPAStar(grid)
    # Override motions to have no valid motions.
    planner.motions = []
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_no_dynamic_obstacles():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+ </span>
<span class="diff-added">+     # No dynamic obstacles defined.</span>
<span class="diff-added">+     time_discovered_obstacles = {}</span>
<span class="diff-added">+ </span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-added">+     planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+ </span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 7 items

test_app.py .......                                                      [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     28    89%
test_app.py      75      0   100%
---------------------------------
TOTAL           333     28    92%
Coverage XML written to file coverage.xml


============================== 7 passed in 0.08s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_no_dynamic_obstacles():
    from app import LPAStar, Node
    # Create a 5x5 grid with no obstacles initially.
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)

    # No dynamic obstacles defined.
    time_discovered_obstacles = {}

    planner = LPAStar(grid)
    planner.set_dynamic_obstacles(False, time_discovered_obstacles)
    planner.max_time_step = 2  # Run for a couple of time steps.
    found, path = planner.plan(start, goal)

    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_grid_size_one():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 1x1 grid.</span>
<span class="diff-added">+     n = 1</span>
<span class="diff-added">+     grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(0, 0)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 7 items

test_app.py .......                                                      [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     28    89%
test_app.py      74      0   100%
---------------------------------
TOTAL           332     28    92%
Coverage XML written to file coverage.xml


============================== 7 passed in 0.07s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_grid_size_one():
    from app import LPAStar, Node
    # Create a 1x1 grid.
    n = 1
    grid = [[0 for _ in range(n)] for _ in range(n)]
    start = Node(0, 0)
    goal = Node(0, 0)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_print_path_empty(capsys):</span>
<span class="diff-added">+     from app import print_path, Node</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(1, 1)</span>
<span class="diff-added">+     grid = [[0, 0], [0, 0]]</span>
<span class="diff-added">+     print_path([], start, goal, grid)</span>
<span class="diff-added">+     captured = capsys.readouterr()</span>
<span class="diff-added">+     assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 7 items

test_app.py .......                                                      [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     25    90%
test_app.py      70      0   100%
---------------------------------
TOTAL           328     25    92%
Coverage XML written to file coverage.xml


============================== 7 passed in 0.07s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_print_path_empty(capsys):
    from app import print_path, Node
    start = Node(0, 0)
    goal = Node(1, 1)
    grid = [[0, 0], [0, 0]]
    print_path([], start, goal, grid)
    captured = capsys.readouterr()
    assert captured.out == "Path from start to goal:\nGoal\n"
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazypq_reinsert():</span>
<span class="diff-added">+     from app import LazyPQ, Node</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node = Node(0, 0)</span>
<span class="diff-added">+     pq.insert(node, (1, 0))</span>
<span class="diff-added">+     pq.insert(node, (0, 1))</span>
<span class="diff-added">+     top = pq.pop()</span>
<span class="diff-added">+     assert top.node == node</span>
<span class="diff-added">+     assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 8 items

test_app.py ........                                                     [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py      79      0   100%
---------------------------------
TOTAL           337     24    93%
Coverage XML written to file coverage.xml


============================== 8 passed in 0.07s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_lazypq_reinsert():
    from app import LazyPQ, Node
    pq = LazyPQ()
    node = Node(0, 0)
    pq.insert(node, (1, 0))
    pq.insert(node, (0, 1))
    top = pq.pop()
    assert top.node == node
    assert top.key == (0, 1)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_clear_path_display_obstacle():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid with an obstacle at (1, 1).</span>
<span class="diff-added">+     grid = [[0, 0, 0],</span>
<span class="diff-added">+             [0, 1, 0],</span>
<span class="diff-added">+             [0, 0, 0]]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 2)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     # Mark (1, 1) as part of the path.</span>
<span class="diff-added">+     planner.grid[1][1] = 3</span>
<span class="diff-added">+     path = [Node(1, 1)]</span>
<span class="diff-added">+     planner.clear_path_display(path)</span>
<span class="diff-added">+     # The obstacle should remain as 1.</span>
<span class="diff-added">+     assert planner.grid[1][1] == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 9 items

test_app.py ..F......                                                    [100%]

=================================== FAILURES ===================================
_______________________ test_clear_path_display_obstacle _______________________

    def test_clear_path_display_obstacle():
        from app import LPAStar, Node
        # Create a 3x3 grid with an obstacle at (1, 1).
        grid = [[0, 0, 0],
                [0, 1, 0],
                [0, 0, 0]]
        start = Node(0, 0)
        goal = Node(2, 2)
        planner = LPAStar(grid)
        # Mark (1, 1) as part of the path.
        planner.grid[1][1] = 3
        path = [Node(1, 1)]
>       planner.clear_path_display(path)

test_app.py:60: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <app.LPAStar object at 0x7e6b5bbcaf60>, path = [Node(1, 1)]

    def clear_path_display(self, path):
        for node in path:
            if self.grid[node.x][node.y] == 1:  # discovered obstacle; leave it as obstacle
                self.grid[node.x][node.y] = 2  # mark as explored but not a path
>       self.grid[self.start.x][self.start.y] = 3
E       AttributeError: 'NoneType' object has no attribute 'x'

app.py:276: AttributeError

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py      89      1    99%
---------------------------------
TOTAL           347     25    93%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_clear_path_display_obstacle - AttributeError: 'NoneT...
========================= 1 failed, 8 passed in 0.09s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_clear_path_display_obstacle():
    from app import LPAStar, Node
    # Create a 3x3 grid with an obstacle at (1, 1).
    grid = [[0, 0, 0],
            [0, 1, 0],
            [0, 0, 0]]
    start = Node(0, 0)
    goal = Node(2, 2)
    planner = LPAStar(grid)
    # Mark (1, 1) as part of the path.
    planner.grid[1][1] = 3
    path = [Node(1, 1)]
    planner.clear_path_display(path)
    # The obstacle should remain as 1.
    assert planner.grid[1][1] == 1
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_no_valid_predecessor():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-added">+     grid = [[0, 1, 0],</span>
<span class="diff-added">+             [0, 1, 0],</span>
<span class="diff-added">+             [0, 1, 0]]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 2)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 5</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     # The path may not reach the goal, but should still return something.</span>
<span class="diff-added">+     # In this case, the path will likely be cut short.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 9 items

test_app.py .........                                                    [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     26    90%
test_app.py      89      0   100%
---------------------------------
TOTAL           347     26    93%
Coverage XML written to file coverage.xml


============================== 9 passed in 0.07s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_no_valid_predecessor():
    from app import LPAStar, Node
    # Create a 3x3 grid with obstacles blocking the direct path.
    grid = [[0, 1, 0],
            [0, 1, 0],
            [0, 1, 0]]
    start = Node(0, 0)
    goal = Node(2, 2)
    planner = LPAStar(grid)
    planner.max_time_step = 5
    found, path = planner.plan(start, goal)
    assert found is False
    # The path may not reach the goal, but should still return something.
    # In this case, the path will likely be cut short.
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_no_valid_motion():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid.</span>
<span class="diff-added">+     grid = [[0 for _ in range(3)] for _ in range(3)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(1, 1)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     # Override motions to have no valid motions.</span>
<span class="diff-added">+     planner.motions = []</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 9 items

test_app.py ..F......                                                    [100%]

=================================== FAILURES ===================================
__________________________ test_cost_no_valid_motion ___________________________

    def test_cost_no_valid_motion():
        from app import LPAStar, Node
        # Create a 3x3 grid.
        grid = [[0 for _ in range(3)] for _ in range(3)]
        start = Node(0, 0)
        goal = Node(1, 1)
        planner = LPAStar(grid)
        # Override motions to have no valid motions.
        planner.motions = []
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
>       assert found is False
E       assert True is False

test_app.py:59: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0
0 0 0
0 0 0

3 3 2
2 3 2
2 2 0

Node(1, 1) cost: 0.0, id: 1001, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 2
2 3 2
2 2 0


---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py      90      1    99%
---------------------------------
TOTAL           348     25    93%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_cost_no_valid_motion - assert True is False
========================= 1 failed, 8 passed in 0.07s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_no_valid_motion():
    from app import LPAStar, Node
    # Create a 3x3 grid.
    grid = [[0 for _ in range(3)] for _ in range(3)]
    start = Node(0, 0)
    goal = Node(1, 1)
    planner = LPAStar(grid)
    # Override motions to have no valid motions.
    planner.motions = []
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_clear_path_display_obstacle():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid with an obstacle at (1, 1).</span>
<span class="diff-added">+     grid = [[0, 0, 0],</span>
<span class="diff-added">+             [0, 1, 0],</span>
<span class="diff-added">+             [0, 0, 0]]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 2)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.start = start</span>
<span class="diff-added">+     # Mark (1, 1) as part of the path.</span>
<span class="diff-added">+     planner.grid[1][1] = 3</span>
<span class="diff-added">+     path = [Node(1, 1)]</span>
<span class="diff-added">+     planner.clear_path_display(path)</span>
<span class="diff-added">+     # The obstacle should remain as 1.</span>
<span class="diff-added">+     assert planner.grid[1][1] == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 9 items

test_app.py ..F......                                                    [100%]

=================================== FAILURES ===================================
_______________________ test_clear_path_display_obstacle _______________________

    def test_clear_path_display_obstacle():
        from app import LPAStar, Node
        # Create a 3x3 grid with an obstacle at (1, 1).
        grid = [[0, 0, 0],
                [0, 1, 0],
                [0, 0, 0]]
        start = Node(0, 0)
        goal = Node(2, 2)
        planner = LPAStar(grid)
        planner.start = start
        # Mark (1, 1) as part of the path.
        planner.grid[1][1] = 3
        path = [Node(1, 1)]
        planner.clear_path_display(path)
        # The obstacle should remain as 1.
>       assert planner.grid[1][1] == 1
E       assert 3 == 1

test_app.py:63: AssertionError

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py      90      0   100%
---------------------------------
TOTAL           348     24    93%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_clear_path_display_obstacle - assert 3 == 1
========================= 1 failed, 8 passed in 0.07s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_clear_path_display_obstacle():
    from app import LPAStar, Node
    # Create a 3x3 grid with an obstacle at (1, 1).
    grid = [[0, 0, 0],
            [0, 1, 0],
            [0, 0, 0]]
    start = Node(0, 0)
    goal = Node(2, 2)
    planner = LPAStar(grid)
    planner.start = start
    # Mark (1, 1) as part of the path.
    planner.grid[1][1] = 3
    path = [Node(1, 1)]
    planner.clear_path_display(path)
    # The obstacle should remain as 1.
    assert planner.grid[1][1] == 1
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_grid_size_one():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 1x1 grid.</span>
<span class="diff-added">+     n = 1</span>
<span class="diff-added">+     grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(0, 0)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 9 items

test_app.py .........                                                    [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py      91      0   100%
---------------------------------
TOTAL           349     24    93%
Coverage XML written to file coverage.xml


============================== 9 passed in 0.07s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_grid_size_one():
    from app import LPAStar, Node
    # Create a 1x1 grid.
    n = 1
    grid = [[0 for _ in range(n)] for _ in range(n)]
    start = Node(0, 0)
    goal = Node(0, 0)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_no_valid_predecessor():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-added">+     grid = [[0, 1, 0],</span>
<span class="diff-added">+             [0, 1, 0],</span>
<span class="diff-added">+             [0, 1, 0]]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 2)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 5</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     # The path may not reach the goal, but should still return something.</span>
<span class="diff-added">+     # In this case, the path will likely be cut short.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 9 items

test_app.py .........                                                    [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py      89      0   100%
---------------------------------
TOTAL           347     24    93%
Coverage XML written to file coverage.xml


============================== 9 passed in 0.07s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_no_valid_predecessor():
    from app import LPAStar, Node
    # Create a 3x3 grid with obstacles blocking the direct path.
    grid = [[0, 1, 0],
            [0, 1, 0],
            [0, 1, 0]]
    start = Node(0, 0)
    goal = Node(2, 2)
    planner = LPAStar(grid)
    planner.max_time_step = 5
    found, path = planner.plan(start, goal)
    assert found is False
    # The path may not reach the goal, but should still return something.
    # In this case, the path will likely be cut short.
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_no_valid_motion():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid.</span>
<span class="diff-added">+     grid = [[0 for _ in range(3)] for _ in range(3)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(1, 1)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     # Override motions to have no valid motions.</span>
<span class="diff-added">+     planner.motions = []</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 9 items

test_app.py ..F......                                                    [100%]

=================================== FAILURES ===================================
__________________________ test_cost_no_valid_motion ___________________________

    def test_cost_no_valid_motion():
        from app import LPAStar, Node
        # Create a 3x3 grid.
        grid = [[0 for _ in range(3)] for _ in range(3)]
        start = Node(0, 0)
        goal = Node(1, 1)
        planner = LPAStar(grid)
        # Override motions to have no valid motions.
        planner.motions = []
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
>       assert found is False
E       assert True is False

test_app.py:59: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0
0 0 0
0 0 0

3 3 2
2 3 2
2 2 0

Node(1, 1) cost: 0.0, id: 1001, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 2
2 3 2
2 2 0


---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py      90      1    99%
---------------------------------
TOTAL           348     25    93%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_cost_no_valid_motion - assert True is False
========================= 1 failed, 8 passed in 0.07s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_no_valid_motion():
    from app import LPAStar, Node
    # Create a 3x3 grid.
    grid = [[0 for _ in range(3)] for _ in range(3)]
    start = Node(0, 0)
    goal = Node(1, 1)
    planner = LPAStar(grid)
    # Override motions to have no valid motions.
    planner.motions = []
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_clear_path_display_obstacle():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid with an obstacle at (1, 1).</span>
<span class="diff-added">+     grid = [[0, 0, 0],</span>
<span class="diff-added">+             [0, 1, 0],</span>
<span class="diff-added">+             [0, 0, 0]]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 2)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.start = start</span>
<span class="diff-added">+     # Mark (1, 1) as part of the path.</span>
<span class="diff-added">+     planner.grid[1][1] = 3</span>
<span class="diff-added">+     path = [Node(1, 1)]</span>
<span class="diff-added">+     planner.clear_path_display(path)</span>
<span class="diff-added">+     # The obstacle should remain as 1.</span>
<span class="diff-added">+     assert planner.grid[1][1] == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 9 items

test_app.py ..F......                                                    [100%]

=================================== FAILURES ===================================
_______________________ test_clear_path_display_obstacle _______________________

    def test_clear_path_display_obstacle():
        from app import LPAStar, Node
        # Create a 3x3 grid with an obstacle at (1, 1).
        grid = [[0, 0, 0],
                [0, 1, 0],
                [0, 0, 0]]
        start = Node(0, 0)
        goal = Node(2, 2)
        planner = LPAStar(grid)
        planner.start = start
        # Mark (1, 1) as part of the path.
        planner.grid[1][1] = 3
        path = [Node(1, 1)]
        planner.clear_path_display(path)
        # The obstacle should remain as 1.
>       assert planner.grid[1][1] == 1
E       assert 3 == 1

test_app.py:63: AssertionError

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     29    89%
test_app.py      90      0   100%
---------------------------------
TOTAL           348     29    92%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_clear_path_display_obstacle - assert 3 == 1
========================= 1 failed, 8 passed in 0.07s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_clear_path_display_obstacle():
    from app import LPAStar, Node
    # Create a 3x3 grid with an obstacle at (1, 1).
    grid = [[0, 0, 0],
            [0, 1, 0],
            [0, 0, 0]]
    start = Node(0, 0)
    goal = Node(2, 2)
    planner = LPAStar(grid)
    planner.start = start
    # Mark (1, 1) as part of the path.
    planner.grid[1][1] = 3
    path = [Node(1, 1)]
    planner.clear_path_display(path)
    # The obstacle should remain as 1.
    assert planner.grid[1][1] == 1
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_grid_size_one():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 1x1 grid.</span>
<span class="diff-added">+     n = 1</span>
<span class="diff-added">+     grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(0, 0)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 9 items

test_app.py .........                                                    [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     23    91%
test_app.py      91      0   100%
---------------------------------
TOTAL           349     23    93%
Coverage XML written to file coverage.xml


============================== 9 passed in 0.07s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_grid_size_one():
    from app import LPAStar, Node
    # Create a 1x1 grid.
    n = 1
    grid = [[0 for _ in range(n)] for _ in range(n)]
    start = Node(0, 0)
    goal = Node(0, 0)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_no_valid_predecessor():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-added">+     grid = [[0, 1, 0],</span>
<span class="diff-added">+             [0, 1, 0],</span>
<span class="diff-added">+             [0, 1, 0]]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 2)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 5</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 9 items

test_app.py .........                                                    [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     23    91%
test_app.py      89      0   100%
---------------------------------
TOTAL           347     23    93%
Coverage XML written to file coverage.xml


============================== 9 passed in 0.07s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_no_valid_predecessor():
    from app import LPAStar, Node
    # Create a 3x3 grid with obstacles blocking the direct path.
    grid = [[0, 1, 0],
            [0, 1, 0],
            [0, 1, 0]]
    start = Node(0, 0)
    goal = Node(2, 2)
    planner = LPAStar(grid)
    planner.max_time_step = 5
    found, path = planner.plan(start, goal)
    assert found is False
    # The path may not reach the goal, and should be empty.
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_no_valid_motion():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid.</span>
<span class="diff-added">+     grid = [[0 for _ in range(3)] for _ in range(3)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(1, 1)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     # Override motions to have no valid motions.</span>
<span class="diff-added">+     planner.motions = []</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 10 items

test_app.py ..F.......                                                   [100%]

=================================== FAILURES ===================================
__________________________ test_cost_no_valid_motion ___________________________

    def test_cost_no_valid_motion():
        from app import LPAStar, Node
        # Create a 3x3 grid.
        grid = [[0 for _ in range(3)] for _ in range(3)]
        start = Node(0, 0)
        goal = Node(1, 1)
        planner = LPAStar(grid)
        # Override motions to have no valid motions.
        planner.motions = []
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
>       assert found is False
E       assert True is False

test_app.py:59: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0
0 0 0
0 0 0

3 3 2
2 3 2
2 2 0

Node(1, 1) cost: 0.0, id: 1001, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 2
2 3 2
2 2 0


---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py     100      1    99%
---------------------------------
TOTAL           358     25    93%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_cost_no_valid_motion - assert True is False
========================= 1 failed, 9 passed in 0.08s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_no_valid_motion():
    from app import LPAStar, Node
    # Create a 3x3 grid.
    grid = [[0 for _ in range(3)] for _ in range(3)]
    start = Node(0, 0)
    goal = Node(1, 1)
    planner = LPAStar(grid)
    # Override motions to have no valid motions.
    planner.motions = []
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_clear_path_display_obstacle():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid with an obstacle at (1, 1).</span>
<span class="diff-added">+     grid = [[0, 0, 0],</span>
<span class="diff-added">+             [0, 1, 0],</span>
<span class="diff-added">+             [0, 0, 0]]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 2)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.start = start</span>
<span class="diff-added">+     # Mark (1, 1) as part of the path.</span>
<span class="diff-added">+     planner.grid[1][1] = 3</span>
<span class="diff-added">+     path = [Node(1, 1)]</span>
<span class="diff-added">+     planner.clear_path_display(path)</span>
<span class="diff-added">+     # The obstacle should remain as 1.</span>
<span class="diff-added">+     assert planner.grid[1][1] == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 10 items

test_app.py ..F.......                                                   [100%]

=================================== FAILURES ===================================
_______________________ test_clear_path_display_obstacle _______________________

    def test_clear_path_display_obstacle():
        from app import LPAStar, Node
        # Create a 3x3 grid with an obstacle at (1, 1).
        grid = [[0, 0, 0],
                [0, 1, 0],
                [0, 0, 0]]
        start = Node(0, 0)
        goal = Node(2, 2)
        planner = LPAStar(grid)
        planner.start = start
        # Mark (1, 1) as part of the path.
        planner.grid[1][1] = 3
        path = [Node(1, 1)]
        planner.clear_path_display(path)
        # The obstacle should remain as 1.
>       assert planner.grid[1][1] == 1
E       assert 3 == 1

test_app.py:63: AssertionError

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py     100      0   100%
---------------------------------
TOTAL           358     24    93%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_clear_path_display_obstacle - assert 3 == 1
========================= 1 failed, 9 passed in 0.08s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_clear_path_display_obstacle():
    from app import LPAStar, Node
    # Create a 3x3 grid with an obstacle at (1, 1).
    grid = [[0, 0, 0],
            [0, 1, 0],
            [0, 0, 0]]
    start = Node(0, 0)
    goal = Node(2, 2)
    planner = LPAStar(grid)
    planner.start = start
    # Mark (1, 1) as part of the path.
    planner.grid[1][1] = 3
    path = [Node(1, 1)]
    planner.clear_path_display(path)
    # The obstacle should remain as 1.
    assert planner.grid[1][1] == 1
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_grid_size_one():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 1x1 grid.</span>
<span class="diff-added">+     n = 1</span>
<span class="diff-added">+     grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(0, 0)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 10 items

test_app.py ..........                                                   [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py     101      0   100%
---------------------------------
TOTAL           359     24    93%
Coverage XML written to file coverage.xml


============================== 10 passed in 0.07s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_grid_size_one():
    from app import LPAStar, Node
    # Create a 1x1 grid.
    n = 1
    grid = [[0 for _ in range(n)] for _ in range(n)]
    start = Node(0, 0)
    goal = Node(0, 0)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_obstacle_s2():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid.</span>
<span class="diff-added">+     grid = [[0 for _ in range(3)] for _ in range(3)]</span>
<span class="diff-added">+     # Place an obstacle at (1, 0).</span>
<span class="diff-added">+     grid[1][0] = 1</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 0)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 10 items

test_app.py ..F.......                                                   [100%]

=================================== FAILURES ===================================
____________________________ test_cost_obstacle_s2 _____________________________

    def test_cost_obstacle_s2():
        from app import LPAStar, Node
        # Create a 3x3 grid.
        grid = [[0 for _ in range(3)] for _ in range(3)]
        # Place an obstacle at (1, 0).
        grid[1][0] = 1
        start = Node(0, 0)
        goal = Node(2, 0)
        planner = LPAStar(grid)
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
>       assert found is False
E       assert True is False

test_app.py:59: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0
1 0 0
0 0 0

3 3 2
1 3 2
3 3 2

Node(2, 0) cost: 0.0, id: 2000, pid: 7
Node(2, 1) cost: 0.0, id: 7, pid: 4
Node(1, 1) cost: 0.0, id: 4, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 2
1 3 2
3 3 2


---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     23    91%
test_app.py     100      1    99%
---------------------------------
TOTAL           358     24    93%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_cost_obstacle_s2 - assert True is False
========================= 1 failed, 9 passed in 0.08s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_obstacle_s2():
    from app import LPAStar, Node
    # Create a 3x3 grid.
    grid = [[0 for _ in range(3)] for _ in range(3)]
    # Place an obstacle at (1, 0).
    grid[1][0] = 1
    start = Node(0, 0)
    goal = Node(2, 0)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_no_valid_motion():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid.</span>
<span class="diff-added">+     grid = [[0 for _ in range(3)] for _ in range(3)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(1, 1)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     # Override motions to have no valid motions.</span>
<span class="diff-added">+     planner.motions = []</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 10 items

test_app.py ..F.......                                                   [100%]

=================================== FAILURES ===================================
__________________________ test_cost_no_valid_motion ___________________________

    def test_cost_no_valid_motion():
        from app import LPAStar, Node
        # Create a 3x3 grid.
        grid = [[0 for _ in range(3)] for _ in range(3)]
        start = Node(0, 0)
        goal = Node(1, 1)
        planner = LPAStar(grid)
        # Override motions to have no valid motions.
        planner.motions = []
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
>       assert found is False
E       assert True is False

test_app.py:59: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0
0 0 0
0 0 0

3 3 2
2 3 2
2 2 0

Node(1, 1) cost: 0.0, id: 1001, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 2
2 3 2
2 2 0


---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py     100      1    99%
---------------------------------
TOTAL           358     25    93%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_cost_no_valid_motion - assert True is False
========================= 1 failed, 9 passed in 0.08s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_no_valid_motion():
    from app import LPAStar, Node
    # Create a 3x3 grid.
    grid = [[0 for _ in range(3)] for _ in range(3)]
    start = Node(0, 0)
    goal = Node(1, 1)
    planner = LPAStar(grid)
    # Override motions to have no valid motions.
    planner.motions = []
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_clear_path_display_obstacle():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid with an obstacle at (1, 1).</span>
<span class="diff-added">+     grid = [[0, 0, 0],</span>
<span class="diff-added">+             [0, 1, 0],</span>
<span class="diff-added">+             [0, 0, 0]]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 2)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.start = start</span>
<span class="diff-added">+     # Mark (1, 1) as part of the path.</span>
<span class="diff-added">+     planner.grid[1][1] = 3</span>
<span class="diff-added">+     path = [Node(1, 1)]</span>
<span class="diff-added">+     planner.clear_path_display(path)</span>
<span class="diff-added">+     # The obstacle should remain as 1.</span>
<span class="diff-added">+     assert planner.grid[1][1] == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 10 items

test_app.py ..F.......                                                   [100%]

=================================== FAILURES ===================================
_______________________ test_clear_path_display_obstacle _______________________

    def test_clear_path_display_obstacle():
        from app import LPAStar, Node
        # Create a 3x3 grid with an obstacle at (1, 1).
        grid = [[0, 0, 0],
                [0, 1, 0],
                [0, 0, 0]]
        start = Node(0, 0)
        goal = Node(2, 2)
        planner = LPAStar(grid)
        planner.start = start
        # Mark (1, 1) as part of the path.
        planner.grid[1][1] = 3
        path = [Node(1, 1)]
        planner.clear_path_display(path)
        # The obstacle should remain as 1.
>       assert planner.grid[1][1] == 1
E       assert 3 == 1

test_app.py:63: AssertionError

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py     100      0   100%
---------------------------------
TOTAL           358     24    93%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_clear_path_display_obstacle - assert 3 == 1
========================= 1 failed, 9 passed in 0.08s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_clear_path_display_obstacle():
    from app import LPAStar, Node
    # Create a 3x3 grid with an obstacle at (1, 1).
    grid = [[0, 0, 0],
            [0, 1, 0],
            [0, 0, 0]]
    start = Node(0, 0)
    goal = Node(2, 2)
    planner = LPAStar(grid)
    planner.start = start
    # Mark (1, 1) as part of the path.
    planner.grid[1][1] = 3
    path = [Node(1, 1)]
    planner.clear_path_display(path)
    # The obstacle should remain as 1.
    assert planner.grid[1][1] == 1
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_grid_size_one():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 1x1 grid.</span>
<span class="diff-added">+     n = 1</span>
<span class="diff-added">+     grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(0, 0)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 10 items

test_app.py ..........                                                   [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py     101      0   100%
---------------------------------
TOTAL           359     24    93%
Coverage XML written to file coverage.xml


============================== 10 passed in 0.07s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_grid_size_one():
    from app import LPAStar, Node
    # Create a 1x1 grid.
    n = 1
    grid = [[0 for _ in range(n)] for _ in range(n)]
    start = Node(0, 0)
    goal = Node(0, 0)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_no_valid_motion():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid.</span>
<span class="diff-added">+     grid = [[0 for _ in range(3)] for _ in range(3)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(1, 1)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     # Override motions to have no valid motions.</span>
<span class="diff-added">+     planner.motions = []</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 10 items

test_app.py ..F.......                                                   [100%]

=================================== FAILURES ===================================
__________________________ test_cost_no_valid_motion ___________________________

    def test_cost_no_valid_motion():
        from app import LPAStar, Node
        # Create a 3x3 grid.
        grid = [[0 for _ in range(3)] for _ in range(3)]
        start = Node(0, 0)
        goal = Node(1, 1)
        planner = LPAStar(grid)
        # Override motions to have no valid motions.
        planner.motions = []
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
>       assert found is False
E       assert True is False

test_app.py:59: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0
0 0 0
0 0 0

3 3 2
2 3 2
2 2 0

Node(1, 1) cost: 0.0, id: 1001, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 2
2 3 2
2 2 0


---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     23    91%
test_app.py     100      1    99%
---------------------------------
TOTAL           358     24    93%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_cost_no_valid_motion - assert True is False
========================= 1 failed, 9 passed in 0.08s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_no_valid_motion():
    from app import LPAStar, Node
    # Create a 3x3 grid.
    grid = [[0 for _ in range(3)] for _ in range(3)]
    start = Node(0, 0)
    goal = Node(1, 1)
    planner = LPAStar(grid)
    # Override motions to have no valid motions.
    planner.motions = []
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_clear_path_display_obstacle():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid with an obstacle at (1, 1).</span>
<span class="diff-added">+     grid = [[0, 0, 0],</span>
<span class="diff-added">+             [0, 1, 0],</span>
<span class="diff-added">+             [0, 0, 0]]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 2)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.start = start</span>
<span class="diff-added">+     # Mark (1, 1) as part of the path.</span>
<span class="diff-added">+     planner.grid[1][1] = 3</span>
<span class="diff-added">+     path = [Node(1, 1)]</span>
<span class="diff-added">+     planner.clear_path_display(path)</span>
<span class="diff-added">+     # The obstacle should remain as 1.</span>
<span class="diff-added">+     assert planner.grid[1][1] == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 10 items

test_app.py ..F.......                                                   [100%]

=================================== FAILURES ===================================
_______________________ test_clear_path_display_obstacle _______________________

    def test_clear_path_display_obstacle():
        from app import LPAStar, Node
        # Create a 3x3 grid with an obstacle at (1, 1).
        grid = [[0, 0, 0],
                [0, 1, 0],
                [0, 0, 0]]
        start = Node(0, 0)
        goal = Node(2, 2)
        planner = LPAStar(grid)
        planner.start = start
        # Mark (1, 1) as part of the path.
        planner.grid[1][1] = 3
        path = [Node(1, 1)]
        planner.clear_path_display(path)
        # The obstacle should remain as 1.
>       assert planner.grid[1][1] == 1
E       assert 3 == 1

test_app.py:63: AssertionError

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py     100      0   100%
---------------------------------
TOTAL           358     24    93%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_clear_path_display_obstacle - assert 3 == 1
========================= 1 failed, 9 passed in 0.08s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_clear_path_display_obstacle():
    from app import LPAStar, Node
    # Create a 3x3 grid with an obstacle at (1, 1).
    grid = [[0, 0, 0],
            [0, 1, 0],
            [0, 0, 0]]
    start = Node(0, 0)
    goal = Node(2, 2)
    planner = LPAStar(grid)
    planner.start = start
    # Mark (1, 1) as part of the path.
    planner.grid[1][1] = 3
    path = [Node(1, 1)]
    planner.clear_path_display(path)
    # The obstacle should remain as 1.
    assert planner.grid[1][1] == 1
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_grid_size_one():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 1x1 grid.</span>
<span class="diff-added">+     n = 1</span>
<span class="diff-added">+     grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(0, 0)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 10 items

test_app.py ..........                                                   [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     23    91%
test_app.py     101      0   100%
---------------------------------
TOTAL           359     23    94%
Coverage XML written to file coverage.xml


============================== 10 passed in 0.07s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_grid_size_one():
    from app import LPAStar, Node
    # Create a 1x1 grid.
    n = 1
    grid = [[0 for _ in range(n)] for _ in range(n)]
    start = Node(0, 0)
    goal = Node(0, 0)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_obstacle_s2():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid.</span>
<span class="diff-added">+     grid = [[0 for _ in range(3)] for _ in range(3)]</span>
<span class="diff-added">+     # Place an obstacle at (1, 0).</span>
<span class="diff-added">+     grid[1][0] = 1</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 0)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 10 items

test_app.py ..F.......                                                   [100%]

=================================== FAILURES ===================================
____________________________ test_cost_obstacle_s2 _____________________________

    def test_cost_obstacle_s2():
        from app import LPAStar, Node
        # Create a 3x3 grid.
        grid = [[0 for _ in range(3)] for _ in range(3)]
        # Place an obstacle at (1, 0).
        grid[1][0] = 1
        start = Node(0, 0)
        goal = Node(2, 0)
        planner = LPAStar(grid)
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
>       assert found is False
E       assert True is False

test_app.py:59: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0
1 0 0
0 0 0

3 3 2
1 3 2
3 3 2

Node(2, 0) cost: 0.0, id: 2000, pid: 7
Node(2, 1) cost: 0.0, id: 7, pid: 4
Node(1, 1) cost: 0.0, id: 4, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 2
1 3 2
3 3 2


---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py     100      1    99%
---------------------------------
TOTAL           358     25    93%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_cost_obstacle_s2 - assert True is False
========================= 1 failed, 9 passed in 0.08s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_obstacle_s2():
    from app import LPAStar, Node
    # Create a 3x3 grid.
    grid = [[0 for _ in range(3)] for _ in range(3)]
    # Place an obstacle at (1, 0).
    grid[1][0] = 1
    start = Node(0, 0)
    goal = Node(2, 0)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_obstacle_s2():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid.</span>
<span class="diff-added">+     grid = [[0 for _ in range(3)] for _ in range(3)]</span>
<span class="diff-added">+     # Place an obstacle at (1, 0).</span>
<span class="diff-added">+     grid[1][0] = 1</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 0)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 10 items

test_app.py ..F.......                                                   [100%]

=================================== FAILURES ===================================
____________________________ test_cost_obstacle_s2 _____________________________

    def test_cost_obstacle_s2():
        from app import LPAStar, Node
        # Create a 3x3 grid.
        grid = [[0 for _ in range(3)] for _ in range(3)]
        # Place an obstacle at (1, 0).
        grid[1][0] = 1
        start = Node(0, 0)
        goal = Node(2, 0)
        planner = LPAStar(grid)
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
>       assert found is False
E       assert True is False

test_app.py:59: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0
1 0 0
0 0 0

3 3 2
1 3 2
3 3 2

Node(2, 0) cost: 0.0, id: 2000, pid: 7
Node(2, 1) cost: 0.0, id: 7, pid: 4
Node(1, 1) cost: 0.0, id: 4, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 2
1 3 2
3 3 2


---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     23    91%
test_app.py     100      1    99%
---------------------------------
TOTAL           358     24    93%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_cost_obstacle_s2 - assert True is False
========================= 1 failed, 9 passed in 0.09s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_obstacle_s2():
    from app import LPAStar, Node
    # Create a 3x3 grid.
    grid = [[0 for _ in range(3)] for _ in range(3)]
    # Place an obstacle at (1, 0).
    grid[1][0] = 1
    start = Node(0, 0)
    goal = Node(2, 0)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_no_valid_motion():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid.</span>
<span class="diff-added">+     grid = [[0 for _ in range(3)] for _ in range(3)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(1, 1)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     # Override motions to have no valid motions.</span>
<span class="diff-added">+     planner.motions = []</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 10 items

test_app.py ..F.......                                                   [100%]

=================================== FAILURES ===================================
__________________________ test_cost_no_valid_motion ___________________________

    def test_cost_no_valid_motion():
        from app import LPAStar, Node
        # Create a 3x3 grid.
        grid = [[0 for _ in range(3)] for _ in range(3)]
        start = Node(0, 0)
        goal = Node(1, 1)
        planner = LPAStar(grid)
        # Override motions to have no valid motions.
        planner.motions = []
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
>       assert found is False
E       assert True is False

test_app.py:59: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0
0 0 0
0 0 0

3 3 2
2 3 2
2 2 0

Node(1, 1) cost: 0.0, id: 1001, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 2
2 3 2
2 2 0


---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py     100      1    99%
---------------------------------
TOTAL           358     25    93%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_cost_no_valid_motion - assert True is False
========================= 1 failed, 9 passed in 0.08s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_no_valid_motion():
    from app import LPAStar, Node
    # Create a 3x3 grid.
    grid = [[0 for _ in range(3)] for _ in range(3)]
    start = Node(0, 0)
    goal = Node(1, 1)
    planner = LPAStar(grid)
    # Override motions to have no valid motions.
    planner.motions = []
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_clear_path_display_obstacle():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid with an obstacle at (1, 1).</span>
<span class="diff-added">+     grid = [[0, 0, 0],</span>
<span class="diff-added">+             [0, 1, 0],</span>
<span class="diff-added">+             [0, 0, 0]]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 2)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.start = start</span>
<span class="diff-added">+     # Mark (1, 1) as part of the path.</span>
<span class="diff-added">+     planner.grid[1][1] = 3</span>
<span class="diff-added">+     path = [Node(1, 1)]</span>
<span class="diff-added">+     planner.clear_path_display(path)</span>
<span class="diff-added">+     # The obstacle should remain as 1.</span>
<span class="diff-added">+     assert planner.grid[1][1] == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 10 items

test_app.py ..F.......                                                   [100%]

=================================== FAILURES ===================================
_______________________ test_clear_path_display_obstacle _______________________

    def test_clear_path_display_obstacle():
        from app import LPAStar, Node
        # Create a 3x3 grid with an obstacle at (1, 1).
        grid = [[0, 0, 0],
                [0, 1, 0],
                [0, 0, 0]]
        start = Node(0, 0)
        goal = Node(2, 2)
        planner = LPAStar(grid)
        planner.start = start
        # Mark (1, 1) as part of the path.
        planner.grid[1][1] = 3
        path = [Node(1, 1)]
        planner.clear_path_display(path)
        # The obstacle should remain as 1.
>       assert planner.grid[1][1] == 1
E       assert 3 == 1

test_app.py:63: AssertionError

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     23    91%
test_app.py     100      0   100%
---------------------------------
TOTAL           358     23    94%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_clear_path_display_obstacle - assert 3 == 1
========================= 1 failed, 9 passed in 0.08s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_clear_path_display_obstacle():
    from app import LPAStar, Node
    # Create a 3x3 grid with an obstacle at (1, 1).
    grid = [[0, 0, 0],
            [0, 1, 0],
            [0, 0, 0]]
    start = Node(0, 0)
    goal = Node(2, 2)
    planner = LPAStar(grid)
    planner.start = start
    # Mark (1, 1) as part of the path.
    planner.grid[1][1] = 3
    path = [Node(1, 1)]
    planner.clear_path_display(path)
    # The obstacle should remain as 1.
    assert planner.grid[1][1] == 1
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_grid_size_one():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 1x1 grid.</span>
<span class="diff-added">+     n = 1</span>
<span class="diff-added">+     grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(0, 0)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 10 items

test_app.py ..........                                                   [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     23    91%
test_app.py     101      0   100%
---------------------------------
TOTAL           359     23    94%
Coverage XML written to file coverage.xml


============================== 10 passed in 0.07s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_grid_size_one():
    from app import LPAStar, Node
    # Create a 1x1 grid.
    n = 1
    grid = [[0 for _ in range(n)] for _ in range(n)]
    start = Node(0, 0)
    goal = Node(0, 0)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_no_valid_predecessor():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-added">+     grid = [[0, 1, 0],</span>
<span class="diff-added">+             [0, 1, 0],</span>
<span class="diff-added">+             [0, 1, 0]]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 2)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 5</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_grid_size_one():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 1x1 grid.</span>
<span class="diff-unchanged">      n = 1</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 10 items

test_app.py ..........                                                   [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py     111      9    92%
---------------------------------
TOTAL           369     33    91%
Coverage XML written to file coverage.xml


============================== 10 passed in 0.07s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_no_valid_predecessor():
    from app import LPAStar, Node
    # Create a 3x3 grid with obstacles blocking the direct path.
    grid = [[0, 1, 0],
            [0, 1, 0],
            [0, 1, 0]]
    start = Node(0, 0)
    goal = Node(2, 2)
    planner = LPAStar(grid)
    planner.max_time_step = 5
    found, path = planner.plan(start, goal)
    assert found is False
    # The path may not reach the goal, and should be empty.
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_no_valid_motion():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid.</span>
<span class="diff-added">+     grid = [[0 for _ in range(3)] for _ in range(3)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(1, 1)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     # Override motions to have no valid motions.</span>
<span class="diff-added">+     planner.motions = []</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_grid_size_one():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 1x1 grid.</span>
<span class="diff-unchanged">      n = 1</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 11 items

test_app.py ..F........                                                  [100%]

=================================== FAILURES ===================================
__________________________ test_cost_no_valid_motion ___________________________

    def test_cost_no_valid_motion():
        from app import LPAStar, Node
        # Create a 3x3 grid.
        grid = [[0 for _ in range(3)] for _ in range(3)]
        start = Node(0, 0)
        goal = Node(1, 1)
        planner = LPAStar(grid)
        # Override motions to have no valid motions.
        planner.motions = []
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
>       assert found is False
E       assert True is False

test_app.py:59: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0
0 0 0
0 0 0

3 3 2
2 3 2
2 2 0

Node(1, 1) cost: 0.0, id: 1001, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 2
2 3 2
2 2 0


---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py     112      1    99%
---------------------------------
TOTAL           370     25    93%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_cost_no_valid_motion - assert True is False
========================= 1 failed, 10 passed in 0.08s =========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_no_valid_motion():
    from app import LPAStar, Node
    # Create a 3x3 grid.
    grid = [[0 for _ in range(3)] for _ in range(3)]
    start = Node(0, 0)
    goal = Node(1, 1)
    planner = LPAStar(grid)
    # Override motions to have no valid motions.
    planner.motions = []
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_clear_path_display_obstacle():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 3x3 grid with an obstacle at (1, 1).</span>
<span class="diff-added">+     grid = [[0, 0, 0],</span>
<span class="diff-added">+             [0, 1, 0],</span>
<span class="diff-added">+             [0, 0, 0]]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 2)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.start = start</span>
<span class="diff-added">+     # Mark (1, 1) as part of the path.</span>
<span class="diff-added">+     planner.grid[1][1] = 3</span>
<span class="diff-added">+     path = [Node(1, 1)]</span>
<span class="diff-added">+     planner.clear_path_display(path)</span>
<span class="diff-added">+     # The obstacle should remain as 1.</span>
<span class="diff-added">+     assert planner.grid[1][1] == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_grid_size_one():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 1x1 grid.</span>
<span class="diff-unchanged">      n = 1</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 11 items

test_app.py ..F........                                                  [100%]

=================================== FAILURES ===================================
_______________________ test_clear_path_display_obstacle _______________________

    def test_clear_path_display_obstacle():
        from app import LPAStar, Node
        # Create a 3x3 grid with an obstacle at (1, 1).
        grid = [[0, 0, 0],
                [0, 1, 0],
                [0, 0, 0]]
        start = Node(0, 0)
        goal = Node(2, 2)
        planner = LPAStar(grid)
        planner.start = start
        # Mark (1, 1) as part of the path.
        planner.grid[1][1] = 3
        path = [Node(1, 1)]
        planner.clear_path_display(path)
        # The obstacle should remain as 1.
>       assert planner.grid[1][1] == 1
E       assert 3 == 1

test_app.py:63: AssertionError

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py     112      0   100%
---------------------------------
TOTAL           370     24    94%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_clear_path_display_obstacle - assert 3 == 1
========================= 1 failed, 10 passed in 0.08s =========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_clear_path_display_obstacle():
    from app import LPAStar, Node
    # Create a 3x3 grid with an obstacle at (1, 1).
    grid = [[0, 0, 0],
            [0, 1, 0],
            [0, 0, 0]]
    start = Node(0, 0)
    goal = Node(2, 2)
    planner = LPAStar(grid)
    planner.start = start
    # Mark (1, 1) as part of the path.
    planner.grid[1][1] = 3
    path = [Node(1, 1)]
    planner.clear_path_display(path)
    # The obstacle should remain as 1.
    assert planner.grid[1][1] == 1
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_grid_size_one():</span>
<span class="diff-added">+     from app import LPAStar, Node</span>
<span class="diff-added">+     # Create a 1x1 grid.</span>
<span class="diff-added">+     n = 1</span>
<span class="diff-added">+     grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(0, 0)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_grid_size_one():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 1x1 grid.</span>
<span class="diff-unchanged">      n = 1</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 3x3 grid with obstacles blocking the direct path.</span>
<span class="diff-unchanged">      grid = [[0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0],</span>
<span class="diff-unchanged">              [0, 1, 0]]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 5</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      # The path may not reach the goal, and should be empty.</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_reinsert():</span>
<span class="diff-unchanged">      from app import LazyPQ, Node</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 0))</span>
<span class="diff-unchanged">      pq.insert(node, (0, 1))</span>
<span class="diff-unchanged">      top = pq.pop()</span>
<span class="diff-unchanged">      assert top.node == node</span>
<span class="diff-unchanged">      assert top.key == (0, 1)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path_empty(capsys):</span>
<span class="diff-unchanged">      from app import print_path, Node</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(1, 1)</span>
<span class="diff-unchanged">      grid = [[0, 0], [0, 0]]</span>
<span class="diff-unchanged">      print_path([], start, goal, grid)</span>
<span class="diff-unchanged">      captured = capsys.readouterr()</span>
<span class="diff-unchanged">      assert captured.out == "Path from start to goal:\nGoal\n"</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_random_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(create_random_obstacles=True)</span>
<span class="diff-unchanged">      planner.max_time_step = 3  # Run for a few time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      from app import LPAStar, Node</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles initially.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      # Define dynamic obstacles that appear at time step 1.</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(False, time_discovered_obstacles)</span>
<span class="diff-unchanged">      planner.max_time_step = 2  # Run for a couple of time steps.</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_pop_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.pop()</span>
<span class="diff-unchanged">      assert "pop from empty priority queue" in str(excinfo.value)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_empty():</span>
<span class="diff-unchanged">      from app import LazyPQ</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError) as excinfo:</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      assert "top from empty priority queue" in str(excinfo.value)</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/quanlac/code/maude/cover-agent/lpastar
plugins: anyio-4.6.2.post1, cov-6.0.0
collected 10 items

test_app.py ..........                                                   [100%]

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name          Stmts   Miss  Cover
---------------------------------
app.py          258     24    91%
test_app.py     113     11    90%
---------------------------------
TOTAL           371     35    91%
Coverage XML written to file coverage.xml


============================== 10 passed in 0.07s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_grid_size_one():
    from app import LPAStar, Node
    # Create a 1x1 grid.
    n = 1
    grid = [[0 for _ in range(n)] for _ in range(n)]
    start = Node(0, 0)
    goal = Node(0, 0)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
        </table>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js"></script>
    </body>
    </html>
    