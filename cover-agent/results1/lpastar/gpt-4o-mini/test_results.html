
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Test Results</title>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-okaidia.min.css" rel="stylesheet" />
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                margin: 20px;
            }
            table {
                border-collapse: collapse;
                width: 100%;
                box-shadow: 0 2px 3px rgba(0,0,0,0.1);
            }
            th, td {
                border: 1px solid #ddd;
                text-align: left;
                padding: 8px;
            }
            th {
                background-color: #f2f2f2;
            }
            tr:nth-child(even) {
                background-color: #f9f9f9;
            }
            .status-pass {
                color: green;
            }
            .status-fail {
                color: red;
            }
            pre {
                background-color: #282c34 !important;
                color: #ffffff !important;
                padding: 10px;
                border-radius: 5px;
                overflow-x: auto;
                white-space: pre-wrap;
                font-family: 'Courier New', Courier, monospace;
                font-size: 1.1em;  /* Slightly larger font size */
            }
        </style>
    </head>
    <body>
        <table>
            <tr>
                <th>Status</th>
                <th>Reason</th>
                <th>Exit Code</th>
                <th>Language</th>
                <th>Modified Test File</th>
                <th>Details</th>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_path_display():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert len(path) > 0</span>
<span class="diff-added">+     assert compare_coordinates(path[-1], goal)</span>
<span class="diff-added">+     assert path[0] == start</span>
<span class="diff-added">+     assert path[-1] == goal</span>
<span class="diff-added">+     # Check if the path is displayed correctly</span>
<span class="diff-added">+     assert all(node.grid[node.x][node.y] == 3 for node in path)</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
______________________________ test_path_display _______________________________

    def test_path_display():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        planner = LPAStar(grid)
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
        assert found is True
        assert len(path) > 0
>       assert compare_coordinates(path[-1], goal)
E       assert False
E        +  where False = compare_coordinates(Node(0, 0), Node(4, 4))

test_app.py:54: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

Node(4, 4) cost: 0.0, id: 4004, pid: 19
Node(3, 4) cost: 0.0, id: 19, pid: 14
Node(2, 4) cost: 0.0, id: 14, pid: 9
Node(1, 4) cost: 0.0, id: 9, pid: 4
Node(0, 4) cost: 0.0, id: 4, pid: 3
Node(0, 3) cost: 0.0, id: 3, pid: 2
Node(0, 2) cost: 0.0, id: 2, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3


---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      37      3      2      0    92%
-----------------------------------------------
TOTAL           295     51     86     13    80%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_path_display - assert False
========================= 1 failed, 2 passed in 0.13s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_path_display():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert len(path) > 0
    assert compare_coordinates(path[-1], goal)
    assert path[0] == start
    assert path[-1] == goal
    # Check if the path is displayed correctly
    assert all(node.grid[node.x][node.y] == 3 for node in path)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazy_priority_queue_remove():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     pq.insert(node1, 1)</span>
<span class="diff-added">+     pq.insert(node2, 2)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is True</span>
<span class="diff-added">+     pq.remove(node1)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is False</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node2) is True</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_______________________ test_lazy_priority_queue_remove ________________________

    def test_lazy_priority_queue_remove():
>       pq = LazyPQ()
E       NameError: name 'LazyPQ' is not defined

test_app.py:46: NameError

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      34      8      2      0    78%
-----------------------------------------------
TOTAL           292     56     86     13    79%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_lazy_priority_queue_remove - NameError: name 'LazyPQ...
========================= 1 failed, 2 passed in 0.11s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_lazy_priority_queue_remove():
    pq = LazyPQ()
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    pq.insert(node1, 1)
    pq.insert(node2, 2)
    assert pq.is_element_in_struct(node1) is True
    pq.remove(node1)
    assert pq.is_element_in_struct(node1) is False
    assert pq.is_element_in_struct(node2) is True
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_dynamic_obstacles_detection():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     time_discovered_obstacles = {</span>
<span class="diff-added">+         1: [Node(1, 1)],</span>
<span class="diff-added">+         2: [Node(2, 2)],</span>
<span class="diff-added">+     }</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-added">+     planner.plan(start, goal)</span>
<span class="diff-added">+     assert grid[1][1] == 1  # Check if obstacle is set</span>
<span class="diff-added">+     assert grid[2][2] == 0  # Check if obstacle is not set yet</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_______________________ test_dynamic_obstacles_detection _______________________

    def test_dynamic_obstacles_detection():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        time_discovered_obstacles = {
            1: [Node(1, 1)],
            2: [Node(2, 2)],
        }
        planner = LPAStar(grid)
        planner.set_dynamic_obstacles(True, time_discovered_obstacles)
        planner.plan(start, goal)
>       assert grid[1][1] == 1  # Check if obstacle is set
E       assert 0 == 1

test_app.py:56: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
1 1 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
1 1 2 2 3
2 2 1 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
1 1 2 2 3
2 2 1 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
1 1 1 2 3
2 2 1 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
1 1 1 2 3
2 2 1 2 3
2 2 2 2 3
1 2 2 2 3

3 3 3 3 3
1 1 1 3 2
2 2 1 3 3
2 2 2 2 3
1 2 2 2 3

3 3 3 3 3
1 1 1 3 2
2 2 1 3 3
2 2 2 2 3
1 2 2 2 3

3 3 3 3 3
1 1 1 3 2
2 2 1 3 3
2 2 2 2 3
1 2 2 2 3

3 3 3 3 3
1 1 1 3 2
2 2 1 3 3
2 2 2 2 3
1 2 2 2 3

Node(4, 4) cost: 0.0, id: 4004, pid: 19
Node(3, 4) cost: 0.0, id: 19, pid: 14
Node(2, 4) cost: 0.0, id: 14, pid: 13
Node(2, 3) cost: 0.0, id: 13, pid: 8
Node(1, 3) cost: 0.0, id: 8, pid: 3
Node(0, 3) cost: 0.0, id: 3, pid: 2
Node(0, 2) cost: 0.0, id: 2, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 1 3 3 3
1 1 1 3 2
2 2 1 3 3
2 2 2 2 3
1 2 2 2 3


---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     29     84      9    88%
test_app.py      34      1      2      0    97%
-----------------------------------------------
TOTAL           292     30     86      9    89%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_dynamic_obstacles_detection - assert 0 == 1
========================= 1 failed, 2 passed in 0.12s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_dynamic_obstacles_detection():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    time_discovered_obstacles = {
        1: [Node(1, 1)],
        2: [Node(2, 2)],
    }
    planner = LPAStar(grid)
    planner.set_dynamic_obstacles(True, time_discovered_obstacles)
    planner.plan(start, goal)
    assert grid[1][1] == 1  # Check if obstacle is set
    assert grid[2][2] == 0  # Check if obstacle is not set yet
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_function_with_obstacles():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[1][1] = 1  # Set an obstacle</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     cost = planner.C(node1, node2)</span>
<span class="diff-added">+     assert cost == math.inf  # Cost should be infinity due to obstacle</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
______________________ test_cost_function_with_obstacles _______________________

    def test_cost_function_with_obstacles():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        grid[1][1] = 1  # Set an obstacle
        planner = LPAStar(grid)
        node1 = Node(0, 0)
        node2 = Node(1, 1)
        cost = planner.C(node1, node2)
>       assert cost == math.inf  # Cost should be infinity due to obstacle
E       NameError: name 'math' is not defined

test_app.py:52: NameError

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      32      0      2      0   100%
-----------------------------------------------
TOTAL           290     48     86     13    81%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_cost_function_with_obstacles - NameError: name 'math...
========================= 1 failed, 2 passed in 0.12s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_function_with_obstacles():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    grid[1][1] = 1  # Set an obstacle
    planner = LPAStar(grid)
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    cost = planner.C(node1, node2)
    assert cost == math.inf  # Cost should be infinity due to obstacle
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazy_priority_queue_remove():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     pq.insert(node1, 1)</span>
<span class="diff-added">+     pq.insert(node2, 2)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is True</span>
<span class="diff-added">+     pq.remove(node1)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is False</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node2) is True</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_______________________ test_lazy_priority_queue_remove ________________________

    def test_lazy_priority_queue_remove():
>       pq = LazyPQ()
E       NameError: name 'LazyPQ' is not defined

test_app.py:46: NameError

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      34      8      2      0    78%
-----------------------------------------------
TOTAL           292     56     86     13    79%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_lazy_priority_queue_remove - NameError: name 'LazyPQ...
========================= 1 failed, 2 passed in 0.12s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_lazy_priority_queue_remove():
    pq = LazyPQ()
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    pq.insert(node1, 1)
    pq.insert(node2, 2)
    assert pq.is_element_in_struct(node1) is True
    pq.remove(node1)
    assert pq.is_element_in_struct(node1) is False
    assert pq.is_element_in_struct(node2) is True
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-added">+ import math</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_function_with_obstacles():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[1][1] = 1  # Set an obstacle</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     cost = planner.C(node1, node2)</span>
<span class="diff-added">+     assert cost == math.inf  # Cost should be infinity due to obstacle</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ...                                                          [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      33      0      2      0   100%
-----------------------------------------------
TOTAL           291     48     86     13    81%
Coverage XML written to file coverage.xml


============================== 3 passed in 0.12s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_function_with_obstacles():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    grid[1][1] = 1  # Set an obstacle
    planner = LPAStar(grid)
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    cost = planner.C(node1, node2)
    assert cost == math.inf  # Cost should be infinity due to obstacle
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">import math
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_dynamic_obstacles_detection():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     time_discovered_obstacles = {</span>
<span class="diff-added">+         1: [Node(1, 1)],</span>
<span class="diff-added">+         2: [Node(2, 2)],</span>
<span class="diff-added">+     }</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-added">+     planner.plan(start, goal)</span>
<span class="diff-added">+     assert grid[1][1] == 1  # Check if obstacle is set</span>
<span class="diff-added">+     assert grid[2][2] == 0  # Check if obstacle is not set yet</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_______________________ test_dynamic_obstacles_detection _______________________

    def test_dynamic_obstacles_detection():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        time_discovered_obstacles = {
            1: [Node(1, 1)],
            2: [Node(2, 2)],
        }
        planner = LPAStar(grid)
        planner.set_dynamic_obstacles(True, time_discovered_obstacles)
        planner.plan(start, goal)
>       assert grid[1][1] == 1  # Check if obstacle is set
E       assert 0 == 1

test_app.py:56: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 1 2 3 3
2 2 2 3 3
2 2 2 3 2
2 2 2 3 3

3 3 3 3 3
2 1 2 3 3
2 2 1 3 3
2 2 1 3 2
2 2 2 3 3

3 3 3 3 3
2 1 2 3 3
2 2 1 3 3
2 2 1 3 2
2 1 2 3 3

3 3 3 3 3
2 1 2 3 3
2 2 1 3 3
2 2 1 3 2
2 1 2 3 3

3 3 3 2 3
2 1 3 3 3
2 2 1 3 3
2 2 1 3 2
2 1 2 3 3

3 3 3 2 3
2 1 3 3 3
2 2 1 3 3
1 2 1 3 2
2 1 2 3 3

3 3 3 3 3
2 1 2 3 3
2 2 1 3 3
1 2 1 3 2
2 1 2 3 3

3 3 3 3 3
2 1 2 3 3
2 2 1 3 3
1 2 1 3 2
2 1 2 3 3

3 3 3 3 3
2 1 2 3 3
2 2 1 3 3
1 2 1 3 2
2 1 2 3 3

Node(4, 4) cost: 0.0, id: 4004, pid: 23
Node(4, 3) cost: 0.0, id: 23, pid: 18
Node(3, 3) cost: 0.0, id: 18, pid: 13
Node(2, 3) cost: 0.0, id: 13, pid: 8
Node(1, 3) cost: 0.0, id: 8, pid: 3
Node(0, 3) cost: 0.0, id: 3, pid: 2
Node(0, 2) cost: 0.0, id: 2, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 3 3 3
1 1 2 3 3
2 2 1 3 3
1 2 1 3 2
2 1 2 3 3


---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     29     84     10    88%
test_app.py      34      1      2      0    97%
-----------------------------------------------
TOTAL           292     30     86     10    89%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_dynamic_obstacles_detection - assert 0 == 1
========================= 1 failed, 2 passed in 0.15s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_dynamic_obstacles_detection():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    time_discovered_obstacles = {
        1: [Node(1, 1)],
        2: [Node(2, 2)],
    }
    planner = LPAStar(grid)
    planner.set_dynamic_obstacles(True, time_discovered_obstacles)
    planner.plan(start, goal)
    assert grid[1][1] == 1  # Check if obstacle is set
    assert grid[2][2] == 0  # Check if obstacle is not set yet
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_path_display():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert len(path) > 0</span>
<span class="diff-added">+     assert compare_coordinates(path[-1], goal)</span>
<span class="diff-added">+     assert path[0] == start</span>
<span class="diff-added">+     assert all(node.grid[node.x][node.y] == 3 for node in path)</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
______________________________ test_path_display _______________________________

    def test_path_display():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        planner = LPAStar(grid)
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
        assert found is True
        assert len(path) > 0
>       assert compare_coordinates(path[-1], goal)
E       assert False
E        +  where False = compare_coordinates(Node(0, 0), Node(4, 4))

test_app.py:54: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

Node(4, 4) cost: 0.0, id: 4004, pid: 19
Node(3, 4) cost: 0.0, id: 19, pid: 14
Node(2, 4) cost: 0.0, id: 14, pid: 9
Node(1, 4) cost: 0.0, id: 9, pid: 4
Node(0, 4) cost: 0.0, id: 4, pid: 3
Node(0, 3) cost: 0.0, id: 3, pid: 2
Node(0, 2) cost: 0.0, id: 2, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3


---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      36      2      2      0    95%
-----------------------------------------------
TOTAL           294     50     86     13    80%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_path_display - assert False
========================= 1 failed, 2 passed in 0.13s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_path_display():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert len(path) > 0
    assert compare_coordinates(path[-1], goal)
    assert path[0] == start
    assert all(node.grid[node.x][node.y] == 3 for node in path)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_path_display_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert len(path) > 0</span>
<span class="diff-added">+     assert compare_coordinates(path[-1], goal)</span>
<span class="diff-added">+     assert path[0] == start</span>
<span class="diff-added">+     assert all(node.grid[node.x][node.y] == 3 for node in path)</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
________________________ test_path_display_correctness _________________________

    def test_path_display_correctness():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        planner = LPAStar(grid)
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
        assert found is True
        assert len(path) > 0
>       assert compare_coordinates(path[-1], goal)
E       assert False
E        +  where False = compare_coordinates(Node(0, 0), Node(4, 4))

test_app.py:54: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

Node(4, 4) cost: 0.0, id: 4004, pid: 19
Node(3, 4) cost: 0.0, id: 19, pid: 14
Node(2, 4) cost: 0.0, id: 14, pid: 9
Node(1, 4) cost: 0.0, id: 9, pid: 4
Node(0, 4) cost: 0.0, id: 4, pid: 3
Node(0, 3) cost: 0.0, id: 3, pid: 2
Node(0, 2) cost: 0.0, id: 2, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3


---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      36      2      2      0    95%
-----------------------------------------------
TOTAL           294     50     86     13    80%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_path_display_correctness - assert False
========================= 1 failed, 2 passed in 0.12s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_path_display_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert len(path) > 0
    assert compare_coordinates(path[-1], goal)
    assert path[0] == start
    assert all(node.grid[node.x][node.y] == 3 for node in path)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazy_priority_queue_remove_correctness():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     pq.insert(node1, 1)</span>
<span class="diff-added">+     pq.insert(node2, 2)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is True</span>
<span class="diff-added">+     pq.remove(node1)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is False</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node2) is True</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_________________ test_lazy_priority_queue_remove_correctness __________________

    def test_lazy_priority_queue_remove_correctness():
>       pq = LazyPQ()
E       NameError: name 'LazyPQ' is not defined

test_app.py:46: NameError

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      34      8      2      0    78%
-----------------------------------------------
TOTAL           292     56     86     13    79%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_lazy_priority_queue_remove_correctness - NameError: ...
========================= 1 failed, 2 passed in 0.11s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_lazy_priority_queue_remove_correctness():
    pq = LazyPQ()
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    pq.insert(node1, 1)
    pq.insert(node2, 2)
    assert pq.is_element_in_struct(node1) is True
    pq.remove(node1)
    assert pq.is_element_in_struct(node1) is False
    assert pq.is_element_in_struct(node2) is True
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-added">+ import math</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_function_with_obstacles_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[1][1] = 1  # Set an obstacle</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     cost = planner.C(node1, node2)</span>
<span class="diff-added">+     assert cost == math.inf  # Cost should be infinity due to obstacle</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ...                                                          [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      33      0      2      0   100%
-----------------------------------------------
TOTAL           291     48     86     13    81%
Coverage XML written to file coverage.xml


============================== 3 passed in 0.12s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_function_with_obstacles_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    grid[1][1] = 1  # Set an obstacle
    planner = LPAStar(grid)
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    cost = planner.C(node1, node2)
    assert cost == math.inf  # Cost should be infinity due to obstacle
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">import math
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_dynamic_obstacles_detection_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     time_discovered_obstacles = {</span>
<span class="diff-added">+         1: [Node(1, 1)],</span>
<span class="diff-added">+         2: [Node(2, 2)],</span>
<span class="diff-added">+     }</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-added">+     planner.plan(start, goal)</span>
<span class="diff-added">+     assert grid[1][1] == 1  # Check if obstacle is set</span>
<span class="diff-added">+     assert grid[2][2] == 0  # Check if obstacle is not set yet</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_________________ test_dynamic_obstacles_detection_correctness _________________

    def test_dynamic_obstacles_detection_correctness():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        time_discovered_obstacles = {
            1: [Node(1, 1)],
            2: [Node(2, 2)],
        }
        planner = LPAStar(grid)
        planner.set_dynamic_obstacles(True, time_discovered_obstacles)
        planner.plan(start, goal)
>       assert grid[1][1] == 1  # Check if obstacle is set
E       assert 0 == 1

test_app.py:56: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 1 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 1 3

3 3 3 3 3
2 1 2 1 3
2 2 1 2 3
2 2 2 2 3
2 2 2 1 3

3 3 3 3 3
2 1 2 1 3
2 2 1 2 3
2 2 2 2 3
2 2 2 1 3

3 3 3 3 3
2 1 2 1 3
2 2 1 2 3
2 1 2 2 3
2 2 2 1 3

3 3 3 3 3
2 1 2 1 3
2 2 1 2 3
2 1 2 2 3
2 2 2 1 3

3 3 3 3 3
2 1 2 1 3
2 2 1 2 3
2 1 2 1 3
2 2 2 1 3

3 3 3 3 3
2 1 2 1 3
2 2 1 2 2
2 1 2 1 3
2 2 2 1 3

No path exists

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     29     84     10    88%
test_app.py      34      1      2      0    97%
-----------------------------------------------
TOTAL           292     30     86     10    89%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_dynamic_obstacles_detection_correctness - assert 0 == 1
========================= 1 failed, 2 passed in 0.13s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_dynamic_obstacles_detection_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    time_discovered_obstacles = {
        1: [Node(1, 1)],
        2: [Node(2, 2)],
    }
    planner = LPAStar(grid)
    planner.set_dynamic_obstacles(True, time_discovered_obstacles)
    planner.plan(start, goal)
    assert grid[1][1] == 1  # Check if obstacle is set
    assert grid[2][2] == 0  # Check if obstacle is not set yet
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_path_display_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert len(path) > 0</span>
<span class="diff-added">+     assert compare_coordinates(path[-1], goal)</span>
<span class="diff-added">+     assert path[0] == start</span>
<span class="diff-added">+     assert all(node.grid[node.x][node.y] == 3 for node in path)</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
________________________ test_path_display_correctness _________________________

    def test_path_display_correctness():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        planner = LPAStar(grid)
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
        assert found is True
        assert len(path) > 0
>       assert compare_coordinates(path[-1], goal)
E       assert False
E        +  where False = compare_coordinates(Node(0, 0), Node(4, 4))

test_app.py:54: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

Node(4, 4) cost: 0.0, id: 4004, pid: 19
Node(3, 4) cost: 0.0, id: 19, pid: 14
Node(2, 4) cost: 0.0, id: 14, pid: 9
Node(1, 4) cost: 0.0, id: 9, pid: 4
Node(0, 4) cost: 0.0, id: 4, pid: 3
Node(0, 3) cost: 0.0, id: 3, pid: 2
Node(0, 2) cost: 0.0, id: 2, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3


---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      36      2      2      0    95%
-----------------------------------------------
TOTAL           294     50     86     13    80%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_path_display_correctness - assert False
========================= 1 failed, 2 passed in 0.12s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_path_display_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert len(path) > 0
    assert compare_coordinates(path[-1], goal)
    assert path[0] == start
    assert all(node.grid[node.x][node.y] == 3 for node in path)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazy_priority_queue_remove_correctness():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     pq.insert(node1, 1)</span>
<span class="diff-added">+     pq.insert(node2, 2)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is True</span>
<span class="diff-added">+     pq.remove(node1)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is False</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node2) is True</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_________________ test_lazy_priority_queue_remove_correctness __________________

    def test_lazy_priority_queue_remove_correctness():
>       pq = LazyPQ()
E       NameError: name 'LazyPQ' is not defined

test_app.py:46: NameError

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      34      8      2      0    78%
-----------------------------------------------
TOTAL           292     56     86     13    79%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_lazy_priority_queue_remove_correctness - NameError: ...
========================= 1 failed, 2 passed in 0.13s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_lazy_priority_queue_remove_correctness():
    pq = LazyPQ()
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    pq.insert(node1, 1)
    pq.insert(node2, 2)
    assert pq.is_element_in_struct(node1) is True
    pq.remove(node1)
    assert pq.is_element_in_struct(node1) is False
    assert pq.is_element_in_struct(node2) is True
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-added">+ import math</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_function_with_obstacles_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[1][1] = 1  # Set an obstacle</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     cost = planner.C(node1, node2)</span>
<span class="diff-added">+     assert cost == math.inf  # Cost should be infinity due to obstacle</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ...                                                          [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      33      0      2      0   100%
-----------------------------------------------
TOTAL           291     48     86     13    81%
Coverage XML written to file coverage.xml


============================== 3 passed in 0.12s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_function_with_obstacles_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    grid[1][1] = 1  # Set an obstacle
    planner = LPAStar(grid)
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    cost = planner.C(node1, node2)
    assert cost == math.inf  # Cost should be infinity due to obstacle
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">import math
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_dynamic_obstacles_detection_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     time_discovered_obstacles = {</span>
<span class="diff-added">+         1: [Node(1, 1)],</span>
<span class="diff-added">+         2: [Node(2, 2)],</span>
<span class="diff-added">+     }</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-added">+     planner.plan(start, goal)</span>
<span class="diff-added">+     assert grid[1][1] == 1  # Check if obstacle is set</span>
<span class="diff-added">+     assert grid[2][2] == 0  # Check if obstacle is not set yet</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_________________ test_dynamic_obstacles_detection_correctness _________________

    def test_dynamic_obstacles_detection_correctness():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        time_discovered_obstacles = {
            1: [Node(1, 1)],
            2: [Node(2, 2)],
        }
        planner = LPAStar(grid)
        planner.set_dynamic_obstacles(True, time_discovered_obstacles)
        planner.plan(start, goal)
>       assert grid[1][1] == 1  # Check if obstacle is set
E       assert 0 == 1

test_app.py:56: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 1 2 2 3
2 2 2 2 3
2 2 2 1 3
2 2 2 2 3

3 3 3 3 3
3 1 2 2 3
3 3 1 2 2
2 3 3 1 3
2 2 3 3 3

3 3 3 3 3
3 1 2 2 3
2 3 1 2 2
2 3 3 1 3
2 2 3 3 3

No path exists

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     29     84     10    88%
test_app.py      34      1      2      0    97%
-----------------------------------------------
TOTAL           292     30     86     10    89%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_dynamic_obstacles_detection_correctness - assert 0 == 1
========================= 1 failed, 2 passed in 0.14s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_dynamic_obstacles_detection_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    time_discovered_obstacles = {
        1: [Node(1, 1)],
        2: [Node(2, 2)],
    }
    planner = LPAStar(grid)
    planner.set_dynamic_obstacles(True, time_discovered_obstacles)
    planner.plan(start, goal)
    assert grid[1][1] == 1  # Check if obstacle is set
    assert grid[2][2] == 0  # Check if obstacle is not set yet
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_path_display_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert len(path) > 0</span>
<span class="diff-added">+     assert compare_coordinates(path[-1], goal)</span>
<span class="diff-added">+     assert path[0] == start</span>
<span class="diff-added">+     assert all(planner.grid[node.x][node.y] == 3 for node in path)</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
________________________ test_path_display_correctness _________________________

    def test_path_display_correctness():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        planner = LPAStar(grid)
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
        assert found is True
        assert len(path) > 0
>       assert compare_coordinates(path[-1], goal)
E       assert False
E        +  where False = compare_coordinates(Node(0, 0), Node(4, 4))

test_app.py:54: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

Node(4, 4) cost: 0.0, id: 4004, pid: 19
Node(3, 4) cost: 0.0, id: 19, pid: 14
Node(2, 4) cost: 0.0, id: 14, pid: 9
Node(1, 4) cost: 0.0, id: 9, pid: 4
Node(0, 4) cost: 0.0, id: 4, pid: 3
Node(0, 3) cost: 0.0, id: 3, pid: 2
Node(0, 2) cost: 0.0, id: 2, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3


---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      36      2      2      0    95%
-----------------------------------------------
TOTAL           294     50     86     13    80%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_path_display_correctness - assert False
========================= 1 failed, 2 passed in 0.12s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_path_display_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert len(path) > 0
    assert compare_coordinates(path[-1], goal)
    assert path[0] == start
    assert all(planner.grid[node.x][node.y] == 3 for node in path)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazy_priority_queue_remove_correctness():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     pq.insert(node1, 1)</span>
<span class="diff-added">+     pq.insert(node2, 2)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is True</span>
<span class="diff-added">+     pq.remove(node1)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is False</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node2) is True</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_________________ test_lazy_priority_queue_remove_correctness __________________

    def test_lazy_priority_queue_remove_correctness():
>       pq = LazyPQ()
E       NameError: name 'LazyPQ' is not defined

test_app.py:46: NameError

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      34      8      2      0    78%
-----------------------------------------------
TOTAL           292     56     86     13    79%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_lazy_priority_queue_remove_correctness - NameError: ...
========================= 1 failed, 2 passed in 0.12s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_lazy_priority_queue_remove_correctness():
    pq = LazyPQ()
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    pq.insert(node1, 1)
    pq.insert(node2, 2)
    assert pq.is_element_in_struct(node1) is True
    pq.remove(node1)
    assert pq.is_element_in_struct(node1) is False
    assert pq.is_element_in_struct(node2) is True
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-added">+ import math</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_function_with_obstacles_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[1][1] = 1  # Set an obstacle</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     cost = planner.C(node1, node2)</span>
<span class="diff-added">+     assert cost == math.inf  # Cost should be infinity due to obstacle</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ...                                                          [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      33      0      2      0   100%
-----------------------------------------------
TOTAL           291     48     86     13    81%
Coverage XML written to file coverage.xml


============================== 3 passed in 0.12s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_function_with_obstacles_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    grid[1][1] = 1  # Set an obstacle
    planner = LPAStar(grid)
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    cost = planner.C(node1, node2)
    assert cost == math.inf  # Cost should be infinity due to obstacle
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">import math
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_dynamic_obstacles_detection_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     time_discovered_obstacles = {</span>
<span class="diff-added">+         1: [Node(1, 1)],</span>
<span class="diff-added">+         2: [Node(2, 2)],</span>
<span class="diff-added">+     }</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-added">+     planner.plan(start, goal)</span>
<span class="diff-added">+     assert grid[1][1] == 1  # Check if obstacle is set</span>
<span class="diff-added">+     assert grid[2][2] == 0  # Check if obstacle is not set yet</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_________________ test_dynamic_obstacles_detection_correctness _________________

    def test_dynamic_obstacles_detection_correctness():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        time_discovered_obstacles = {
            1: [Node(1, 1)],
            2: [Node(2, 2)],
        }
        planner = LPAStar(grid)
        planner.set_dynamic_obstacles(True, time_discovered_obstacles)
        planner.plan(start, goal)
>       assert grid[1][1] == 1  # Check if obstacle is set
E       assert 0 == 1

test_app.py:56: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
1 1 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
1 1 2 3 3
2 2 1 3 2
2 2 2 3 3
2 2 2 2 3

3 3 3 3 3
1 1 2 3 3
2 2 1 3 2
2 2 2 3 3
2 2 2 2 3

3 3 3 3 3
1 1 2 3 3
2 2 1 3 2
2 2 2 3 3
2 2 1 2 3

3 3 3 3 3
1 1 1 3 3
2 2 1 3 2
2 2 2 3 3
2 2 1 2 3

3 3 3 3 3
1 1 1 2 3
2 2 1 3 3
2 2 2 3 3
2 2 1 2 3

3 2 3 3 3
1 1 1 2 3
2 2 1 3 3
2 2 2 3 3
2 2 1 2 3

No path exists

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     29     84     10    88%
test_app.py      34      1      2      0    97%
-----------------------------------------------
TOTAL           292     30     86     10    89%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_dynamic_obstacles_detection_correctness - assert 0 == 1
========================= 1 failed, 2 passed in 0.14s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_dynamic_obstacles_detection_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    time_discovered_obstacles = {
        1: [Node(1, 1)],
        2: [Node(2, 2)],
    }
    planner = LPAStar(grid)
    planner.set_dynamic_obstacles(True, time_discovered_obstacles)
    planner.plan(start, goal)
    assert grid[1][1] == 1  # Check if obstacle is set
    assert grid[2][2] == 0  # Check if obstacle is not set yet
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_path_display_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert len(path) > 0</span>
<span class="diff-added">+     assert compare_coordinates(path[-1], goal)</span>
<span class="diff-added">+     assert path[0] == start</span>
<span class="diff-added">+     assert all(planner.grid[node.x][node.y] == 3 for node in path)</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
________________________ test_path_display_correctness _________________________

    def test_path_display_correctness():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        planner = LPAStar(grid)
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
        assert found is True
        assert len(path) > 0
>       assert compare_coordinates(path[-1], goal)
E       assert False
E        +  where False = compare_coordinates(Node(0, 0), Node(4, 4))

test_app.py:54: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

Node(4, 4) cost: 0.0, id: 4004, pid: 19
Node(3, 4) cost: 0.0, id: 19, pid: 14
Node(2, 4) cost: 0.0, id: 14, pid: 9
Node(1, 4) cost: 0.0, id: 9, pid: 4
Node(0, 4) cost: 0.0, id: 4, pid: 3
Node(0, 3) cost: 0.0, id: 3, pid: 2
Node(0, 2) cost: 0.0, id: 2, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3


---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      36      2      2      0    95%
-----------------------------------------------
TOTAL           294     50     86     13    80%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_path_display_correctness - assert False
========================= 1 failed, 2 passed in 0.13s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_path_display_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert len(path) > 0
    assert compare_coordinates(path[-1], goal)
    assert path[0] == start
    assert all(planner.grid[node.x][node.y] == 3 for node in path)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazy_priority_queue_remove_correctness():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     pq.insert(node1, 1)</span>
<span class="diff-added">+     pq.insert(node2, 2)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is True</span>
<span class="diff-added">+     pq.remove(node1)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is False</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node2) is True</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_________________ test_lazy_priority_queue_remove_correctness __________________

    def test_lazy_priority_queue_remove_correctness():
>       pq = LazyPQ()
E       NameError: name 'LazyPQ' is not defined

test_app.py:46: NameError

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      34      8      2      0    78%
-----------------------------------------------
TOTAL           292     56     86     13    79%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_lazy_priority_queue_remove_correctness - NameError: ...
========================= 1 failed, 2 passed in 0.11s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_lazy_priority_queue_remove_correctness():
    pq = LazyPQ()
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    pq.insert(node1, 1)
    pq.insert(node2, 2)
    assert pq.is_element_in_struct(node1) is True
    pq.remove(node1)
    assert pq.is_element_in_struct(node1) is False
    assert pq.is_element_in_struct(node2) is True
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-added">+ import math</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_function_with_obstacles_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[1][1] = 1  # Set an obstacle</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     cost = planner.C(node1, node2)</span>
<span class="diff-added">+     assert cost == math.inf  # Cost should be infinity due to obstacle</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ...                                                          [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      33      0      2      0   100%
-----------------------------------------------
TOTAL           291     48     86     13    81%
Coverage XML written to file coverage.xml


============================== 3 passed in 0.12s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_function_with_obstacles_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    grid[1][1] = 1  # Set an obstacle
    planner = LPAStar(grid)
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    cost = planner.C(node1, node2)
    assert cost == math.inf  # Cost should be infinity due to obstacle
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">import math
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_dynamic_obstacles_detection_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     time_discovered_obstacles = {</span>
<span class="diff-added">+         1: [Node(1, 1)],</span>
<span class="diff-added">+         2: [Node(2, 2)],</span>
<span class="diff-added">+     }</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-added">+     planner.plan(start, goal)</span>
<span class="diff-added">+     assert grid[1][1] == 1  # Check if obstacle is set</span>
<span class="diff-added">+     assert grid[2][2] == 0  # Check if obstacle is not set yet</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_________________ test_dynamic_obstacles_detection_correctness _________________

    def test_dynamic_obstacles_detection_correctness():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        time_discovered_obstacles = {
            1: [Node(1, 1)],
            2: [Node(2, 2)],
        }
        planner = LPAStar(grid)
        planner.set_dynamic_obstacles(True, time_discovered_obstacles)
        planner.plan(start, goal)
>       assert grid[1][1] == 1  # Check if obstacle is set
E       assert 0 == 1

test_app.py:56: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 2
2 1 2 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 2
2 1 2 3 3
2 2 1 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 2
2 1 2 3 3
2 2 1 2 3
2 2 1 2 3
2 2 2 2 3

3 3 3 3 2
2 1 2 3 3
2 2 1 2 3
2 2 1 2 3
2 2 2 2 3

3 3 3 3 2
2 1 2 3 3
2 2 1 3 3
2 2 1 3 2
2 2 2 3 3

3 3 3 3 2
1 1 2 3 3
2 2 1 3 3
2 2 1 3 2
2 2 2 3 3

3 3 3 3 2
1 1 2 3 3
2 2 1 3 3
2 2 1 3 2
2 1 2 3 3

3 3 3 3 2
1 1 2 3 3
2 2 1 3 3
2 2 1 3 2
2 1 2 3 3

3 3 3 3 2
1 1 2 3 3
2 2 1 3 3
2 2 1 3 3
2 1 2 2 3

Node(4, 4) cost: 0.0, id: 4004, pid: 19
Node(3, 4) cost: 0.0, id: 19, pid: 14
Node(2, 4) cost: 0.0, id: 14, pid: 9
Node(1, 4) cost: 0.0, id: 9, pid: 8
Node(1, 3) cost: 0.0, id: 8, pid: 3
Node(0, 3) cost: 0.0, id: 3, pid: 2
Node(0, 2) cost: 0.0, id: 2, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 3 3 2
1 1 2 3 3
2 2 1 3 3
2 2 1 3 3
2 1 2 2 3


---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     29     84      9    88%
test_app.py      34      1      2      0    97%
-----------------------------------------------
TOTAL           292     30     86      9    89%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_dynamic_obstacles_detection_correctness - assert 0 == 1
========================= 1 failed, 2 passed in 0.14s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_dynamic_obstacles_detection_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    time_discovered_obstacles = {
        1: [Node(1, 1)],
        2: [Node(2, 2)],
    }
    planner = LPAStar(grid)
    planner.set_dynamic_obstacles(True, time_discovered_obstacles)
    planner.plan(start, goal)
    assert grid[1][1] == 1  # Check if obstacle is set
    assert grid[2][2] == 0  # Check if obstacle is not set yet
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_path_display_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 10  # Allow more time for pathfinding</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert len(path) > 0</span>
<span class="diff-added">+     assert compare_coordinates(path[-1], goal)</span>
<span class="diff-added">+     assert path[0] == start</span>
<span class="diff-added">+     assert all(planner.grid[node.x][node.y] == 3 for node in path)</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
________________________ test_path_display_correctness _________________________

    def test_path_display_correctness():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        planner = LPAStar(grid)
        planner.max_time_step = 10  # Allow more time for pathfinding
        found, path = planner.plan(start, goal)
        assert found is True
        assert len(path) > 0
>       assert compare_coordinates(path[-1], goal)
E       assert False
E        +  where False = compare_coordinates(Node(0, 0), Node(4, 4))

test_app.py:54: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

Node(4, 4) cost: 0.0, id: 4004, pid: 19
Node(3, 4) cost: 0.0, id: 19, pid: 14
Node(2, 4) cost: 0.0, id: 14, pid: 9
Node(1, 4) cost: 0.0, id: 9, pid: 4
Node(0, 4) cost: 0.0, id: 4, pid: 3
Node(0, 3) cost: 0.0, id: 3, pid: 2
Node(0, 2) cost: 0.0, id: 2, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3


---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      36      2      2      0    95%
-----------------------------------------------
TOTAL           294     50     86     13    80%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_path_display_correctness - assert False
========================= 1 failed, 2 passed in 0.12s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_path_display_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 10  # Allow more time for pathfinding
    found, path = planner.plan(start, goal)
    assert found is True
    assert len(path) > 0
    assert compare_coordinates(path[-1], goal)
    assert path[0] == start
    assert all(planner.grid[node.x][node.y] == 3 for node in path)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazy_priority_queue_remove_correctness():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     pq.insert(node1, 1)</span>
<span class="diff-added">+     pq.insert(node2, 2)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is True</span>
<span class="diff-added">+     pq.remove(node1)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is False</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node2) is True</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_________________ test_lazy_priority_queue_remove_correctness __________________

    def test_lazy_priority_queue_remove_correctness():
>       pq = LazyPQ()
E       NameError: name 'LazyPQ' is not defined

test_app.py:46: NameError

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      34      8      2      0    78%
-----------------------------------------------
TOTAL           292     56     86     13    79%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_lazy_priority_queue_remove_correctness - NameError: ...
========================= 1 failed, 2 passed in 0.11s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_lazy_priority_queue_remove_correctness():
    pq = LazyPQ()
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    pq.insert(node1, 1)
    pq.insert(node2, 2)
    assert pq.is_element_in_struct(node1) is True
    pq.remove(node1)
    assert pq.is_element_in_struct(node1) is False
    assert pq.is_element_in_struct(node2) is True
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-added">+ import math</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_function_with_obstacles_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[1][1] = 1  # Set an obstacle</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     cost = planner.C(node1, node2)</span>
<span class="diff-added">+     assert cost == math.inf  # Cost should be infinity due to obstacle</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ...                                                          [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      33      0      2      0   100%
-----------------------------------------------
TOTAL           291     48     86     13    81%
Coverage XML written to file coverage.xml


============================== 3 passed in 0.11s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_function_with_obstacles_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    grid[1][1] = 1  # Set an obstacle
    planner = LPAStar(grid)
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    cost = planner.C(node1, node2)
    assert cost == math.inf  # Cost should be infinity due to obstacle
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">import math
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_dynamic_obstacles_detection_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     time_discovered_obstacles = {</span>
<span class="diff-added">+         1: [Node(1, 1)],</span>
<span class="diff-added">+         2: [Node(2, 2)],</span>
<span class="diff-added">+     }</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-added">+     planner.plan(start, goal)</span>
<span class="diff-added">+     assert grid[1][1] == 1  # Check if obstacle is set</span>
<span class="diff-added">+     assert grid[2][2] == 0  # Check if obstacle is not set yet</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_________________ test_dynamic_obstacles_detection_correctness _________________

    def test_dynamic_obstacles_detection_correctness():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        time_discovered_obstacles = {
            1: [Node(1, 1)],
            2: [Node(2, 2)],
        }
        planner = LPAStar(grid)
        planner.set_dynamic_obstacles(True, time_discovered_obstacles)
        planner.plan(start, goal)
>       assert grid[1][1] == 1  # Check if obstacle is set
E       assert 0 == 1

test_app.py:56: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 2 3 3
3 1 2 2 3
3 3 3 3 3
2 2 2 2 3
2 2 2 2 3

3 3 2 3 3
3 1 2 2 3
2 3 2 3 3
2 2 2 2 3
2 2 2 2 3

No path exists

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     29     84     10    88%
test_app.py      34      1      2      0    97%
-----------------------------------------------
TOTAL           292     30     86     10    89%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_dynamic_obstacles_detection_correctness - assert 0 == 1
========================= 1 failed, 2 passed in 0.15s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_dynamic_obstacles_detection_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    time_discovered_obstacles = {
        1: [Node(1, 1)],
        2: [Node(2, 2)],
    }
    planner = LPAStar(grid)
    planner.set_dynamic_obstacles(True, time_discovered_obstacles)
    planner.plan(start, goal)
    assert grid[1][1] == 1  # Check if obstacle is set
    assert grid[2][2] == 0  # Check if obstacle is not set yet
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_path_display_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 10  # Allow more time for pathfinding</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert len(path) > 0</span>
<span class="diff-added">+     assert compare_coordinates(path[-1], goal)</span>
<span class="diff-added">+     assert path[0] == start</span>
<span class="diff-added">+     assert all(planner.grid[node.x][node.y] == 3 for node in path)</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
________________________ test_path_display_correctness _________________________

    def test_path_display_correctness():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        planner = LPAStar(grid)
        planner.max_time_step = 10  # Allow more time for pathfinding
        found, path = planner.plan(start, goal)
        assert found is True
        assert len(path) > 0
>       assert compare_coordinates(path[-1], goal)
E       assert False
E        +  where False = compare_coordinates(Node(0, 0), Node(4, 4))

test_app.py:54: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

Node(4, 4) cost: 0.0, id: 4004, pid: 19
Node(3, 4) cost: 0.0, id: 19, pid: 14
Node(2, 4) cost: 0.0, id: 14, pid: 9
Node(1, 4) cost: 0.0, id: 9, pid: 4
Node(0, 4) cost: 0.0, id: 4, pid: 3
Node(0, 3) cost: 0.0, id: 3, pid: 2
Node(0, 2) cost: 0.0, id: 2, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3


---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      36      2      2      0    95%
-----------------------------------------------
TOTAL           294     50     86     13    80%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_path_display_correctness - assert False
========================= 1 failed, 2 passed in 0.12s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_path_display_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 10  # Allow more time for pathfinding
    found, path = planner.plan(start, goal)
    assert found is True
    assert len(path) > 0
    assert compare_coordinates(path[-1], goal)
    assert path[0] == start
    assert all(planner.grid[node.x][node.y] == 3 for node in path)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazy_priority_queue_remove_correctness():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     pq.insert(node1, 1)</span>
<span class="diff-added">+     pq.insert(node2, 2)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is True</span>
<span class="diff-added">+     pq.remove(node1)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is False</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node2) is True</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_________________ test_lazy_priority_queue_remove_correctness __________________

    def test_lazy_priority_queue_remove_correctness():
>       pq = LazyPQ()
E       NameError: name 'LazyPQ' is not defined

test_app.py:46: NameError

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      34      8      2      0    78%
-----------------------------------------------
TOTAL           292     56     86     13    79%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_lazy_priority_queue_remove_correctness - NameError: ...
========================= 1 failed, 2 passed in 0.12s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_lazy_priority_queue_remove_correctness():
    pq = LazyPQ()
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    pq.insert(node1, 1)
    pq.insert(node2, 2)
    assert pq.is_element_in_struct(node1) is True
    pq.remove(node1)
    assert pq.is_element_in_struct(node1) is False
    assert pq.is_element_in_struct(node2) is True
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-added">+ import math</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_function_with_obstacles_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[1][1] = 1  # Set an obstacle</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     cost = planner.C(node1, node2)</span>
<span class="diff-added">+     assert cost == math.inf  # Cost should be infinity due to obstacle</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ...                                                          [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      33      0      2      0   100%
-----------------------------------------------
TOTAL           291     48     86     13    81%
Coverage XML written to file coverage.xml


============================== 3 passed in 0.12s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_function_with_obstacles_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    grid[1][1] = 1  # Set an obstacle
    planner = LPAStar(grid)
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    cost = planner.C(node1, node2)
    assert cost == math.inf  # Cost should be infinity due to obstacle
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">import math
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_dynamic_obstacles_detection_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     time_discovered_obstacles = {</span>
<span class="diff-added">+         1: [Node(1, 1)],</span>
<span class="diff-added">+         2: [Node(2, 2)],</span>
<span class="diff-added">+     }</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-added">+     planner.plan(start, goal)</span>
<span class="diff-added">+     assert grid[1][1] == 1  # Check if obstacle is set</span>
<span class="diff-added">+     assert grid[2][2] == 0  # Check if obstacle is not set yet</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_________________ test_dynamic_obstacles_detection_correctness _________________

    def test_dynamic_obstacles_detection_correctness():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        time_discovered_obstacles = {
            1: [Node(1, 1)],
            2: [Node(2, 2)],
        }
        planner = LPAStar(grid)
        planner.set_dynamic_obstacles(True, time_discovered_obstacles)
        planner.plan(start, goal)
>       assert grid[1][1] == 1  # Check if obstacle is set
E       assert 0 == 1

test_app.py:56: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 1 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 1 2 2 3
2 2 1 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 1 2 2 3
1 2 1 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 1 2 2 3
1 2 1 2 3
1 2 2 2 3
2 2 2 2 3

3 3 2 3 3
2 1 2 2 3
1 2 1 2 3
1 2 2 2 3
2 2 2 2 3

No path exists

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     29     84     10    88%
test_app.py      34      1      2      0    97%
-----------------------------------------------
TOTAL           292     30     86     10    89%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_dynamic_obstacles_detection_correctness - assert 0 == 1
========================= 1 failed, 2 passed in 0.15s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_dynamic_obstacles_detection_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    time_discovered_obstacles = {
        1: [Node(1, 1)],
        2: [Node(2, 2)],
    }
    planner = LPAStar(grid)
    planner.set_dynamic_obstacles(True, time_discovered_obstacles)
    planner.plan(start, goal)
    assert grid[1][1] == 1  # Check if obstacle is set
    assert grid[2][2] == 0  # Check if obstacle is not set yet
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_path_display_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 10  # Allow more time for pathfinding</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert len(path) > 0</span>
<span class="diff-added">+     assert compare_coordinates(path[-1], goal)</span>
<span class="diff-added">+     assert path[0] == start</span>
<span class="diff-added">+     assert all(planner.grid[node.x][node.y] == 3 for node in path)</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
________________________ test_path_display_correctness _________________________

    def test_path_display_correctness():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        planner = LPAStar(grid)
        planner.max_time_step = 10  # Allow more time for pathfinding
        found, path = planner.plan(start, goal)
        assert found is True
        assert len(path) > 0
>       assert compare_coordinates(path[-1], goal)
E       assert False
E        +  where False = compare_coordinates(Node(0, 0), Node(4, 4))

test_app.py:54: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

Node(4, 4) cost: 0.0, id: 4004, pid: 19
Node(3, 4) cost: 0.0, id: 19, pid: 14
Node(2, 4) cost: 0.0, id: 14, pid: 9
Node(1, 4) cost: 0.0, id: 9, pid: 4
Node(0, 4) cost: 0.0, id: 4, pid: 3
Node(0, 3) cost: 0.0, id: 3, pid: 2
Node(0, 2) cost: 0.0, id: 2, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3


---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      36      2      2      0    95%
-----------------------------------------------
TOTAL           294     50     86     13    80%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_path_display_correctness - assert False
========================= 1 failed, 2 passed in 0.13s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_path_display_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 10  # Allow more time for pathfinding
    found, path = planner.plan(start, goal)
    assert found is True
    assert len(path) > 0
    assert compare_coordinates(path[-1], goal)
    assert path[0] == start
    assert all(planner.grid[node.x][node.y] == 3 for node in path)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-added">+ from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazy_priority_queue_remove_correctness():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     pq.insert(node1, 1)</span>
<span class="diff-added">+     pq.insert(node2, 2)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is True</span>
<span class="diff-added">+     pq.remove(node1)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is False</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node2) is True</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ...                                                          [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      35      0      2      0   100%
-----------------------------------------------
TOTAL           293     48     86     13    81%
Coverage XML written to file coverage.xml


============================== 3 passed in 0.13s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_lazy_priority_queue_remove_correctness():
    pq = LazyPQ()
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    pq.insert(node1, 1)
    pq.insert(node2, 2)
    assert pq.is_element_in_struct(node1) is True
    pq.remove(node1)
    assert pq.is_element_in_struct(node1) is False
    assert pq.is_element_in_struct(node2) is True
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">from app import LazyPQ
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-added">+ import math</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_function_with_obstacles_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[1][1] = 1  # Set an obstacle</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     cost = planner.C(node1, node2)</span>
<span class="diff-added">+     assert cost == math.inf  # Cost should be infinity due to obstacle</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ...                                                          [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      33      0      2      0   100%
-----------------------------------------------
TOTAL           291     48     86     13    81%
Coverage XML written to file coverage.xml


============================== 3 passed in 0.11s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_function_with_obstacles_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    grid[1][1] = 1  # Set an obstacle
    planner = LPAStar(grid)
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    cost = planner.C(node1, node2)
    assert cost == math.inf  # Cost should be infinity due to obstacle
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">import math
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_dynamic_obstacles_detection_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     time_discovered_obstacles = {</span>
<span class="diff-added">+         1: [Node(1, 1)],</span>
<span class="diff-added">+         2: [Node(2, 2)],</span>
<span class="diff-added">+     }</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-added">+     planner.plan(start, goal)</span>
<span class="diff-added">+     assert grid[1][1] == 1  # Check if obstacle is set</span>
<span class="diff-added">+     assert grid[2][2] == 0  # Check if obstacle is not set yet</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_________________ test_dynamic_obstacles_detection_correctness _________________

    def test_dynamic_obstacles_detection_correctness():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        time_discovered_obstacles = {
            1: [Node(1, 1)],
            2: [Node(2, 2)],
        }
        planner = LPAStar(grid)
        planner.set_dynamic_obstacles(True, time_discovered_obstacles)
        planner.plan(start, goal)
>       assert grid[1][1] == 1  # Check if obstacle is set
E       assert 0 == 1

test_app.py:56: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 1 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 1 3

3 3 3 3 3
2 1 2 2 3
2 2 1 2 3
2 2 2 2 3
2 2 2 1 3

3 3 3 3 3
2 1 2 2 3
2 2 1 2 3
2 2 2 2 3
2 2 2 1 3

3 3 3 3 3
2 1 2 2 3
2 2 1 2 3
2 2 2 2 3
2 2 2 1 3

3 3 3 3 3
2 1 2 2 3
2 2 1 2 3
2 2 2 2 3
2 2 2 1 3

3 3 3 3 3
2 1 2 2 3
2 2 1 2 3
2 2 2 2 3
2 2 1 1 3

3 3 3 3 3
2 1 2 3 3
2 2 1 3 2
2 2 2 3 3
2 2 1 1 3

3 3 3 3 1
2 1 2 3 3
2 2 1 3 2
2 2 2 3 3
2 2 1 1 3

3 3 3 3 1
3 1 2 2 3
3 3 1 3 2
2 3 3 3 3
2 2 1 1 3

Node(4, 4) cost: 0.0, id: 4004, pid: 19
Node(3, 4) cost: 0.0, id: 19, pid: 18
Node(3, 3) cost: 0.0, id: 18, pid: 17
Node(3, 2) cost: 0.0, id: 17, pid: 16
Node(3, 1) cost: 0.0, id: 16, pid: 11
Node(2, 1) cost: 0.0, id: 11, pid: 10
Node(2, 0) cost: 0.0, id: 10, pid: 5
Node(1, 0) cost: 0.0, id: 5, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 3 3 1
1 1 2 2 3
3 3 1 3 2
2 3 3 3 3
2 2 1 1 3


---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     29     84      9    88%
test_app.py      34      1      2      0    97%
-----------------------------------------------
TOTAL           292     30     86      9    89%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_dynamic_obstacles_detection_correctness - assert 0 == 1
========================= 1 failed, 2 passed in 0.14s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_dynamic_obstacles_detection_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    time_discovered_obstacles = {
        1: [Node(1, 1)],
        2: [Node(2, 2)],
    }
    planner = LPAStar(grid)
    planner.set_dynamic_obstacles(True, time_discovered_obstacles)
    planner.plan(start, goal)
    assert grid[1][1] == 1  # Check if obstacle is set
    assert grid[2][2] == 0  # Check if obstacle is not set yet
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_path_display_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 10  # Allow more time for pathfinding</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert len(path) > 0</span>
<span class="diff-added">+     assert compare_coordinates(path[-1], goal)</span>
<span class="diff-added">+     assert path[0] == start</span>
<span class="diff-added">+     assert all(planner.grid[node.x][node.y] == 3 for node in path)</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
________________________ test_path_display_correctness _________________________

    def test_path_display_correctness():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        planner = LPAStar(grid)
        planner.max_time_step = 10  # Allow more time for pathfinding
        found, path = planner.plan(start, goal)
        assert found is True
        assert len(path) > 0
>       assert compare_coordinates(path[-1], goal)
E       assert False
E        +  where False = compare_coordinates(Node(0, 0), Node(4, 4))

test_app.py:54: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

Node(4, 4) cost: 0.0, id: 4004, pid: 19
Node(3, 4) cost: 0.0, id: 19, pid: 14
Node(2, 4) cost: 0.0, id: 14, pid: 9
Node(1, 4) cost: 0.0, id: 9, pid: 4
Node(0, 4) cost: 0.0, id: 4, pid: 3
Node(0, 3) cost: 0.0, id: 3, pid: 2
Node(0, 2) cost: 0.0, id: 2, pid: 1
Node(0, 1) cost: 0.0, id: 1, pid: 0
Node(0, 0) cost: 0.0, id: 0, pid: 0
3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3


---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      36      2      2      0    95%
-----------------------------------------------
TOTAL           294     50     86     13    80%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_path_display_correctness - assert False
========================= 1 failed, 2 passed in 0.13s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_path_display_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 10  # Allow more time for pathfinding
    found, path = planner.plan(start, goal)
    assert found is True
    assert len(path) > 0
    assert compare_coordinates(path[-1], goal)
    assert path[0] == start
    assert all(planner.grid[node.x][node.y] == 3 for node in path)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-added">+ from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazy_priority_queue_remove_correctness():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     pq.insert(node1, 1)</span>
<span class="diff-added">+     pq.insert(node2, 2)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is True</span>
<span class="diff-added">+     pq.remove(node1)</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node1) is False</span>
<span class="diff-added">+     assert pq.is_element_in_struct(node2) is True</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ...                                                          [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      35      0      2      0   100%
-----------------------------------------------
TOTAL           293     48     86     13    81%
Coverage XML written to file coverage.xml


============================== 3 passed in 0.11s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_lazy_priority_queue_remove_correctness():
    pq = LazyPQ()
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    pq.insert(node1, 1)
    pq.insert(node2, 2)
    assert pq.is_element_in_struct(node1) is True
    pq.remove(node1)
    assert pq.is_element_in_struct(node1) is False
    assert pq.is_element_in_struct(node2) is True
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">from app import LazyPQ
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-added">+ import math</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_cost_function_with_obstacles_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[1][1] = 1  # Set an obstacle</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     node1 = Node(0, 0)</span>
<span class="diff-added">+     node2 = Node(1, 1)</span>
<span class="diff-added">+     cost = planner.C(node1, node2)</span>
<span class="diff-added">+     assert cost == math.inf  # Cost should be infinity due to obstacle</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ...                                                          [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     48     84     13    79%
test_app.py      33      0      2      0   100%
-----------------------------------------------
TOTAL           291     48     86     13    81%
Coverage XML written to file coverage.xml


============================== 3 passed in 0.12s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_cost_function_with_obstacles_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    grid[1][1] = 1  # Set an obstacle
    planner = LPAStar(grid)
    node1 = Node(0, 0)
    node2 = Node(1, 1)
    cost = planner.C(node1, node2)
    assert cost == math.inf  # Cost should be infinity due to obstacle
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">import math
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_dynamic_obstacles_detection_correctness():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     time_discovered_obstacles = {</span>
<span class="diff-added">+         1: [Node(1, 1)],</span>
<span class="diff-added">+         2: [Node(2, 2)],</span>
<span class="diff-added">+     }</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-added">+     planner.plan(start, goal)</span>
<span class="diff-added">+     assert grid[1][1] == 1  # Check if obstacle is set</span>
<span class="diff-added">+     assert grid[2][2] == 0  # Check if obstacle is not set yet</span>
<span class="diff-added">+ </span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ..F                                                          [100%]

=================================== FAILURES ===================================
_________________ test_dynamic_obstacles_detection_correctness _________________

    def test_dynamic_obstacles_detection_correctness():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        time_discovered_obstacles = {
            1: [Node(1, 1)],
            2: [Node(2, 2)],
        }
        planner = LPAStar(grid)
        planner.set_dynamic_obstacles(True, time_discovered_obstacles)
        planner.plan(start, goal)
>       assert grid[1][1] == 1  # Check if obstacle is set
E       assert 0 == 1

test_app.py:56: AssertionError
----------------------------- Captured stdout call -----------------------------
3 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

3 3 3 3 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 1 2 2 3
2 2 2 2 3
2 2 2 2 3
2 2 2 2 3

3 3 3 3 3
2 1 2 2 3
2 2 1 2 3
2 2 2 2 3
1 2 2 2 3

3 3 3 3 2
2 1 2 3 3
2 2 1 2 3
2 2 2 2 3
1 2 2 2 3

3 2 3 3 2
3 1 2 3 3
3 3 1 2 3
2 3 3 3 3
1 2 2 2 3

3 2 3 3 2
3 1 2 3 3
3 3 1 1 3
2 3 3 3 3
1 2 2 2 3

3 2 3 3 2
3 1 2 3 1
3 3 1 1 3
2 3 3 3 3
1 2 2 2 3

3 2 3 3 2
3 1 2 3 1
2 3 1 1 3
2 3 3 3 3
1 2 2 2 3

No path exists

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     29     84      9    88%
test_app.py      34      1      2      0    97%
-----------------------------------------------
TOTAL           292     30     86      9    89%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_dynamic_obstacles_detection_correctness - assert 0 == 1
========================= 1 failed, 2 passed in 0.11s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">def test_dynamic_obstacles_detection_correctness():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    time_discovered_obstacles = {
        1: [Node(1, 1)],
        2: [Node(2, 2)],
    }
    planner = LPAStar(grid)
    planner.set_dynamic_obstacles(True, time_discovered_obstacles)
    planner.plan(start, goal)
    assert grid[1][1] == 1  # Check if obstacle is set
    assert grid[2][2] == 0  # Check if obstacle is not set yet
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
        </table>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js"></script>
    </body>
    </html>
    