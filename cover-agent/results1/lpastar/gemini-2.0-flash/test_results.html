
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Test Results</title>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-okaidia.min.css" rel="stylesheet" />
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                margin: 20px;
            }
            table {
                border-collapse: collapse;
                width: 100%;
                box-shadow: 0 2px 3px rgba(0,0,0,0.1);
            }
            th, td {
                border: 1px solid #ddd;
                text-align: left;
                padding: 8px;
            }
            th {
                background-color: #f2f2f2;
            }
            tr:nth-child(even) {
                background-color: #f9f9f9;
            }
            .status-pass {
                color: green;
            }
            .status-fail {
                color: red;
            }
            pre {
                background-color: #282c34 !important;
                color: #ffffff !important;
                padding: 10px;
                border-radius: 5px;
                overflow-x: auto;
                white-space: pre-wrap;
                font-family: 'Courier New', Courier, monospace;
                font-size: 1.1em;  /* Slightly larger font size */
            }
        </style>
    </head>
    <body>
        <table>
            <tr>
                <th>Status</th>
                <th>Reason</th>
                <th>Exit Code</th>
                <th>Language</th>
                <th>Modified Test File</th>
                <th>Details</th>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ import pytest</span>
<span class="diff-added">+ from app import LazyPQ</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazypq_top_pop_empty():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     with pytest.raises(KeyError):</span>
<span class="diff-added">+         pq.top()</span>
<span class="diff-added">+     with pytest.raises(KeyError):</span>
<span class="diff-added">+         pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 3 items

test_app.py ...                                                          [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     46     84     11    80%
test_app.py      32      0      2      0   100%
-----------------------------------------------
TOTAL           290     46     86     11    82%
Coverage XML written to file coverage.xml


============================== 3 passed in 0.12s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">import pytest
from app import LazyPQ

def test_lazypq_top_pop_empty():
    pq = LazyPQ()
    with pytest.raises(KeyError):
        pq.top()
    with pytest.raises(KeyError):
        pq.pop()
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">import pytest
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_dynamic_obstacles():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     time_discovered_obstacles = {</span>
<span class="diff-added">+         1: [Node(1, 1)],</span>
<span class="diff-added">+         2: [Node(2, 2)]</span>
<span class="diff-added">+     }</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 3</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 4 items

test_app.py ....                                                         [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     27     84      8    89%
test_app.py      45      0      2      0   100%
-----------------------------------------------
TOTAL           303     27     86      8    90%
Coverage XML written to file coverage.xml


============================== 4 passed in 0.15s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_dynamic_obstacles():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    time_discovered_obstacles = {
        1: [Node(1, 1)],
        2: [Node(2, 2)]
    }
    planner = LPAStar(grid)
    planner.max_time_step = 3
    planner.set_dynamic_obstacles(True, time_discovered_obstacles)
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-added">+ def test_no_valid_predecessor():</span>
<span class="diff-added">+     # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-added">+     grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[0][0] = 0  # Start is free</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == [start]</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 5 items

test_app.py ..F..                                                        [100%]

=================================== FAILURES ===================================
__________________________ test_no_valid_predecessor ___________________________

    def test_no_valid_predecessor():
        # Create a 5x5 grid with obstacles blocking all paths except the start.
        grid = [[1 for _ in range(5)] for _ in range(5)]
        grid[0][0] = 0  # Start is free
        start = Node(0, 0)
        goal = Node(4, 4)
        planner = LPAStar(grid)
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
        # Expect no path to be found since the goal is unreachable.
        assert found is False
>       assert path == [start]
E       assert [] == [Node(0, 0)]
E         
E         Right contains one more item: Node(0, 0)
E         Use -v to get more diff

test_app.py:59: AssertionError
----------------------------- Captured stdout call -----------------------------
3 1 1 1 1
1 1 1 1 1
1 1 1 1 1
1 1 1 1 1
1 1 1 1 1

3 1 1 1 1
1 1 1 1 1
1 1 1 1 1
1 1 1 1 1
1 1 1 1 1

No path exists

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     28     84      9    89%
test_app.py      56      0      2      0   100%
-----------------------------------------------
TOTAL           314     28     86      9    90%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_no_valid_predecessor - assert [] == [Node(0, 0)]
========================= 1 failed, 4 passed in 0.13s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_no_valid_predecessor():
    # Create a 5x5 grid with obstacles blocking all paths except the start.
    grid = [[1 for _ in range(5)] for _ in range(5)]
    grid[0][0] = 0  # Start is free
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    # Expect no path to be found since the goal is unreachable.
    assert found is False
    assert path == [start]
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-added">+ import math</span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_c_obstacle():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[1][0] = 1  # obstacle</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-added">+     s1 = Node(1, 0)</span>
<span class="diff-added">+     s2 = Node(2, 0)</span>
<span class="diff-added">+     cost = planner.C(s1, s2)</span>
<span class="diff-added">+     assert cost == math.inf</span>
<span class="diff-added">+     s1 = Node(0,0)</span>
<span class="diff-added">+     s2 = Node(1,0)</span>
<span class="diff-added">+     cost = planner.C(s1,s2)</span>
<span class="diff-added">+     assert cost == math.inf</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 5 items

test_app.py .....                                                        [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     27     84      7    89%
test_app.py      62      0      2      0   100%
-----------------------------------------------
TOTAL           320     27     86      7    91%
Coverage XML written to file coverage.xml


============================== 5 passed in 0.12s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">import math
from app import LPAStar, Node

def test_c_obstacle():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    grid[1][0] = 1  # obstacle
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.motions = [Node(1, 0, cost=1.0)]
    s1 = Node(1, 0)
    s2 = Node(2, 0)
    cost = planner.C(s1, s2)
    assert cost == math.inf
    s1 = Node(0,0)
    s2 = Node(1,0)
    cost = planner.C(s1,s2)
    assert cost == math.inf
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">import math
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-added">+ def test_same_start_goal():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(0, 0)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path == [start]</span>
<span class="diff-added">+     assert len(path) == 1</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 5 items

test_app.py .....                                                        [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     27     84      8    89%
test_app.py      56      0      2      0   100%
-----------------------------------------------
TOTAL           314     27     86      8    91%
Coverage XML written to file coverage.xml


============================== 5 passed in 0.14s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_same_start_goal():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(0, 0)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert path == [start]
    assert len(path) == 1
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-added">+ def test_larger_grid():</span>
<span class="diff-added">+     n = 11</span>
<span class="diff-added">+     grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(n - 1, n - 1)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 6 items

test_app.py ......                                                       [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     28     84      8    89%
test_app.py      68      0      2      0   100%
-----------------------------------------------
TOTAL           326     28     86      8    91%
Coverage XML written to file coverage.xml


============================== 6 passed in 0.17s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_larger_grid():
    n = 11
    grid = [[0 for _ in range(n)] for _ in range(n)]
    start = Node(0, 0)
    goal = Node(n - 1, n - 1)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-added">+ from app import LazyPQ, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazypq_insert_remove_clear():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node = Node(0, 0)</span>
<span class="diff-added">+     pq.insert(node, (1, 1))</span>
<span class="diff-added">+     pq.remove(node)</span>
<span class="diff-added">+     pq.clear()</span>
<span class="diff-added">+     assert pq.empty()</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 6 items

test_app.py ......                                                       [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     27     84      8    89%
test_app.py      64      0      2      0   100%
-----------------------------------------------
TOTAL           322     27     86      8    91%
Coverage XML written to file coverage.xml


============================== 6 passed in 0.14s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LazyPQ, Node

def test_lazypq_insert_remove_clear():
    pq = LazyPQ()
    node = Node(0, 0)
    pq.insert(node, (1, 1))
    pq.remove(node)
    pq.clear()
    assert pq.empty()
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-added">+ from app import print_path, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_print_path():</span>
<span class="diff-added">+     path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(2, 2)</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     print_path(path, start, goal, grid)</span>
<span class="diff-added">+     assert True  # Just check that it runs without errors</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 6 items

test_app.py ......                                                       [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     24     84      9    90%
test_app.py      64      0      2      0   100%
-----------------------------------------------
TOTAL           322     24     86      9    92%
Coverage XML written to file coverage.xml


============================== 6 passed in 0.15s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import print_path, Node

def test_print_path():
    path = [Node(0, 0), Node(1, 1), Node(2, 2)]
    start = Node(0, 0)
    goal = Node(2, 2)
    grid = [[0 for _ in range(5)] for _ in range(5)]
    print_path(path, start, goal, grid)
    assert True  # Just check that it runs without errors
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_no_valid_predecessor():</span>
<span class="diff-added">+     # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-added">+     grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[0][0] = 0  # Start is free</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == [start]</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 7 items

test_app.py ..F....                                                      [100%]

=================================== FAILURES ===================================
__________________________ test_no_valid_predecessor ___________________________

    def test_no_valid_predecessor():
        # Create a 5x5 grid with obstacles blocking all paths except the start.
        grid = [[1 for _ in range(5)] for _ in range(5)]
        grid[0][0] = 0  # Start is free
        start = Node(0, 0)
        goal = Node(4, 4)
        planner = LPAStar(grid)
        planner.max_time_step = 1
        found, path = planner.plan(start, goal)
        # Expect no path to be found since the goal is unreachable.
        assert found is False
>       assert path == [start]
E       assert [] == [Node(0, 0)]
E         
E         Right contains one more item: Node(0, 0)
E         Use -v to get more diff

test_app.py:59: AssertionError
----------------------------- Captured stdout call -----------------------------
3 1 1 1 1
1 1 1 1 1
1 1 1 1 1
1 1 1 1 1
1 1 1 1 1

3 1 1 1 1
1 1 1 1 1
1 1 1 1 1
1 1 1 1 1
1 1 1 1 1

No path exists

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     24     84      9    90%
test_app.py      75      0      2      0   100%
-----------------------------------------------
TOTAL           333     24     86      9    92%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_no_valid_predecessor - assert [] == [Node(0, 0)]
========================= 1 failed, 6 passed in 0.13s ==========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_no_valid_predecessor():
    # Create a 5x5 grid with obstacles blocking all paths except the start.
    grid = [[1 for _ in range(5)] for _ in range(5)]
    grid[0][0] = 0  # Start is free
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    # Expect no path to be found since the goal is unreachable.
    assert found is False
    assert path == [start]
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ import math</span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_c_obstacle():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[1][0] = 1  # obstacle</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-added">+     s1 = Node(1, 0)</span>
<span class="diff-added">+     s2 = Node(2, 0)</span>
<span class="diff-added">+     cost = planner.C(s1, s2)</span>
<span class="diff-added">+     assert cost == math.inf</span>
<span class="diff-added">+     s1 = Node(0,0)</span>
<span class="diff-added">+     s2 = Node(1,0)</span>
<span class="diff-added">+     grid[1][0] = 1</span>
<span class="diff-added">+     cost = planner.C(s1,s2)</span>
<span class="diff-added">+     assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 7 items

test_app.py .......                                                      [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     23     84      8    91%
test_app.py      82      0      2      0   100%
-----------------------------------------------
TOTAL           340     23     86      8    93%
Coverage XML written to file coverage.xml


============================== 7 passed in 0.15s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">import math
from app import LPAStar, Node

def test_c_obstacle():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    grid[1][0] = 1  # obstacle
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.motions = [Node(1, 0, cost=1.0)]
    s1 = Node(1, 0)
    s2 = Node(2, 0)
    cost = planner.C(s1, s2)
    assert cost == math.inf
    s1 = Node(0,0)
    s2 = Node(1,0)
    grid[1][0] = 1
    cost = planner.C(s1,s2)
    assert cost == math.inf
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">import math
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_larger_grid():</span>
<span class="diff-added">+     n = 11</span>
<span class="diff-added">+     grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(n - 1, n - 1)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 8 items

test_app.py ........                                                     [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     23     84      8    91%
test_app.py      94      0      2      0   100%
-----------------------------------------------
TOTAL           352     23     86      8    93%
Coverage XML written to file coverage.xml


============================== 8 passed in 0.17s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_larger_grid():
    n = 11
    grid = [[0 for _ in range(n)] for _ in range(n)]
    start = Node(0, 0)
    goal = Node(n - 1, n - 1)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LazyPQ, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazypq_insert_remove_clear():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node = Node(0, 0)</span>
<span class="diff-added">+     pq.insert(node, (1, 1))</span>
<span class="diff-added">+     pq.remove(node)</span>
<span class="diff-added">+     pq.clear()</span>
<span class="diff-added">+     assert pq.empty()</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 8 items

test_app.py ........                                                     [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     24     84      8    91%
test_app.py      90      0      2      0   100%
-----------------------------------------------
TOTAL           348     24     86      8    93%
Coverage XML written to file coverage.xml


============================== 8 passed in 0.15s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LazyPQ, Node

def test_lazypq_insert_remove_clear():
    pq = LazyPQ()
    node = Node(0, 0)
    pq.insert(node, (1, 1))
    pq.remove(node)
    pq.clear()
    assert pq.empty()
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LazyPQ, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazypq_insert_remove_clear():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node = Node(0, 0)</span>
<span class="diff-added">+     pq.insert(node, (1, 1))</span>
<span class="diff-added">+     pq.remove(node)</span>
<span class="diff-added">+     assert node not in pq.entry_finder</span>
<span class="diff-added">+     pq.clear()</span>
<span class="diff-added">+     assert pq.empty()</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 8 items

test_app.py ........                                                     [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     24     84      9    90%
test_app.py      91      0      2      0   100%
-----------------------------------------------
TOTAL           349     24     86      9    92%
Coverage XML written to file coverage.xml


============================== 8 passed in 0.13s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LazyPQ, Node

def test_lazypq_insert_remove_clear():
    pq = LazyPQ()
    node = Node(0, 0)
    pq.insert(node, (1, 1))
    pq.remove(node)
    assert node not in pq.entry_finder
    pq.clear()
    assert pq.empty()
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_no_valid_predecessor():</span>
<span class="diff-added">+     # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-added">+     grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[0][0] = 0  # Start is free</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 8 items

test_app.py ........                                                     [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     24     84      9    90%
test_app.py      93      0      2      0   100%
-----------------------------------------------
TOTAL           351     24     86      9    92%
Coverage XML written to file coverage.xml


============================== 8 passed in 0.16s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_no_valid_predecessor():
    # Create a 5x5 grid with obstacles blocking all paths except the start.
    grid = [[1 for _ in range(5)] for _ in range(5)]
    grid[0][0] = 0  # Start is free
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    # Expect no path to be found since the goal is unreachable.
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_larger_grid():</span>
<span class="diff-added">+     n = 11</span>
<span class="diff-added">+     grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(n - 1, n - 1)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 8 items

test_app.py ........                                                     [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     23     84      8    91%
test_app.py      94      0      2      0   100%
-----------------------------------------------
TOTAL           352     23     86      8    93%
Coverage XML written to file coverage.xml


============================== 8 passed in 0.18s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_larger_grid():
    n = 11
    grid = [[0 for _ in range(n)] for _ in range(n)]
    start = Node(0, 0)
    goal = Node(n - 1, n - 1)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import make_grid</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_make_grid():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     make_grid(grid)</span>
<span class="diff-added">+     assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 9 items

test_app.py .........                                                    [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     22     84      8    91%
test_app.py      99      0      2      0   100%
-----------------------------------------------
TOTAL           357     22     86      8    93%
Coverage XML written to file coverage.xml


============================== 9 passed in 0.18s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import make_grid

def test_make_grid():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    make_grid(grid)
    assert True
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_no_valid_predecessor():</span>
<span class="diff-added">+     # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-added">+     grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[0][0] = 0  # Start is free</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 10 items

test_app.py ..........                                                   [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     22     84      8    91%
test_app.py     110      0      2      0   100%
-----------------------------------------------
TOTAL           368     22     86      8    93%
Coverage XML written to file coverage.xml


============================== 10 passed in 0.17s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_no_valid_predecessor():
    # Create a 5x5 grid with obstacles blocking all paths except the start.
    grid = [[1 for _ in range(5)] for _ in range(5)]
    grid[0][0] = 0  # Start is free
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    # Expect no path to be found since the goal is unreachable.
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_same_start_goal():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(0, 0)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path == [start]</span>
<span class="diff-added">+     assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 9 items

test_app.py .........                                                    [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     22     84      7    92%
test_app.py     110      9      2      0    92%
-----------------------------------------------
TOTAL           368     31     86      7    92%
Coverage XML written to file coverage.xml


============================== 9 passed in 0.18s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_same_start_goal():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(0, 0)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert path == [start]
    assert len(path) == 1
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_dynamic_obstacles():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     time_discovered_obstacles = {</span>
<span class="diff-added">+         1: [Node(1, 1)],</span>
<span class="diff-added">+         2: [Node(2, 2)]</span>
<span class="diff-added">+     }</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 3</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 9 items

test_app.py .........                                                    [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     23     84      9    91%
test_app.py     112     11      2      0    90%
-----------------------------------------------
TOTAL           370     34     86      9    91%
Coverage XML written to file coverage.xml


============================== 9 passed in 0.19s ===============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_dynamic_obstacles():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    time_discovered_obstacles = {
        1: [Node(1, 1)],
        2: [Node(2, 2)]
    }
    planner = LPAStar(grid)
    planner.max_time_step = 3
    planner.set_dynamic_obstacles(True, time_discovered_obstacles)
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LazyPQ, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazypq_insert_remove_clear():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node = Node(0, 0)</span>
<span class="diff-added">+     pq.insert(node, (1, 1))</span>
<span class="diff-added">+     pq.remove(node)</span>
<span class="diff-added">+     assert node not in pq.entry_finder</span>
<span class="diff-added">+     pq.clear()</span>
<span class="diff-added">+     assert pq.empty()</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 10 items

test_app.py ..........                                                   [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     22     84      7    92%
test_app.py     108      0      2      0   100%
-----------------------------------------------
TOTAL           366     22     86      7    94%
Coverage XML written to file coverage.xml


============================== 10 passed in 0.19s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LazyPQ, Node

def test_lazypq_insert_remove_clear():
    pq = LazyPQ()
    node = Node(0, 0)
    pq.insert(node, (1, 1))
    pq.remove(node)
    assert node not in pq.entry_finder
    pq.clear()
    assert pq.empty()
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LazyPQ, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazypq_insert_remove_clear():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node = Node(0, 0)</span>
<span class="diff-added">+     pq.insert(node, (1, 1))</span>
<span class="diff-added">+     pq.remove(node)</span>
<span class="diff-added">+     assert node not in pq.entry_finder</span>
<span class="diff-added">+     pq.clear()</span>
<span class="diff-added">+     assert pq.empty()</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 10 items

test_app.py ..........                                                   [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     23     84      8    91%
test_app.py     108      0      2      0   100%
-----------------------------------------------
TOTAL           366     23     86      8    93%
Coverage XML written to file coverage.xml


============================== 10 passed in 0.18s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LazyPQ, Node

def test_lazypq_insert_remove_clear():
    pq = LazyPQ()
    node = Node(0, 0)
    pq.insert(node, (1, 1))
    pq.remove(node)
    assert node not in pq.entry_finder
    pq.clear()
    assert pq.empty()
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_no_valid_predecessor():</span>
<span class="diff-added">+     # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-added">+     grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[0][0] = 0  # Start is free</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 10 items

test_app.py ..........                                                   [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     22     84      8    91%
test_app.py     110      0      2      0   100%
-----------------------------------------------
TOTAL           368     22     86      8    93%
Coverage XML written to file coverage.xml


============================== 10 passed in 0.18s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_no_valid_predecessor():
    # Create a 5x5 grid with obstacles blocking all paths except the start.
    grid = [[1 for _ in range(5)] for _ in range(5)]
    grid[0][0] = 0  # Start is free
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    # Expect no path to be found since the goal is unreachable.
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_larger_grid():</span>
<span class="diff-added">+     n = 11</span>
<span class="diff-added">+     grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(n - 1, n - 1)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 10 items

test_app.py ..........                                                   [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     25     84      9    90%
test_app.py     122     10      2      0    92%
-----------------------------------------------
TOTAL           380     35     86      9    91%
Coverage XML written to file coverage.xml


============================== 10 passed in 0.19s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_larger_grid():
    n = 11
    grid = [[0 for _ in range(n)] for _ in range(n)]
    start = Node(0, 0)
    goal = Node(n - 1, n - 1)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_clear_path_display_obstacle():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     path = [Node(1, 1), Node(2, 2)]</span>
<span class="diff-added">+     grid[1][1] = 1  # Mark (1,1) as an obstacle</span>
<span class="diff-added">+     planner.grid = grid</span>
<span class="diff-added">+     planner.clear_path_display(path)</span>
<span class="diff-added">+     assert planner.grid[1][1] == 1</span>
<span class="diff-added">+     assert planner.grid[2][2] == 2</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 11 items

test_app.py ..F........                                                  [100%]

=================================== FAILURES ===================================
_______________________ test_clear_path_display_obstacle _______________________

    def test_clear_path_display_obstacle():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        planner = LPAStar(grid)
        path = [Node(1, 1), Node(2, 2)]
        grid[1][1] = 1  # Mark (1,1) as an obstacle
        planner.grid = grid
>       planner.clear_path_display(path)

test_app.py:56: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <app.LPAStar object at 0x7fe08d411ea0>, path = [Node(1, 1), Node(2, 2)]

    def clear_path_display(self, path):
        for node in path:
            if self.grid[node.x][node.y] == 1:  # discovered obstacle; leave it as obstacle
                self.grid[node.x][node.y] = 2  # mark as explored but not a path
>       self.grid[self.start.x][self.start.y] = 3
E       AttributeError: 'NoneType' object has no attribute 'x'

app.py:276: AttributeError

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     22     84      7    92%
test_app.py     122      2      2      0    98%
-----------------------------------------------
TOTAL           380     24     86      7    93%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_clear_path_display_obstacle - AttributeError: 'NoneT...
========================= 1 failed, 10 passed in 0.21s =========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_clear_path_display_obstacle():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    path = [Node(1, 1), Node(2, 2)]
    grid[1][1] = 1  # Mark (1,1) as an obstacle
    planner.grid = grid
    planner.clear_path_display(path)
    assert planner.grid[1][1] == 1
    assert planner.grid[2][2] == 2
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LazyPQ, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazypq_insert_remove_clear():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node = Node(0, 0)</span>
<span class="diff-added">+     pq.insert(node, (1, 1))</span>
<span class="diff-added">+     pq.remove(node)</span>
<span class="diff-added">+     assert node not in pq.entry_finder</span>
<span class="diff-added">+     pq.clear()</span>
<span class="diff-added">+     assert pq.empty()</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 11 items

test_app.py ...........                                                  [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     23     84      9    91%
test_app.py     119      0      2      0   100%
-----------------------------------------------
TOTAL           377     23     86      9    93%
Coverage XML written to file coverage.xml


============================== 11 passed in 0.17s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LazyPQ, Node

def test_lazypq_insert_remove_clear():
    pq = LazyPQ()
    node = Node(0, 0)
    pq.insert(node, (1, 1))
    pq.remove(node)
    assert node not in pq.entry_finder
    pq.clear()
    assert pq.empty()
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_no_valid_predecessor():</span>
<span class="diff-added">+     # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-added">+     grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[0][0] = 0  # Start is free</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 10 items

test_app.py ..........                                                   [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     28     84      9    89%
test_app.py     121      9      2      0    93%
-----------------------------------------------
TOTAL           379     37     86      9    90%
Coverage XML written to file coverage.xml


============================== 10 passed in 0.22s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_no_valid_predecessor():
    # Create a 5x5 grid with obstacles blocking all paths except the start.
    grid = [[1 for _ in range(5)] for _ in range(5)]
    grid[0][0] = 0  # Start is free
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    # Expect no path to be found since the goal is unreachable.
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_larger_grid():</span>
<span class="diff-added">+     n = 11</span>
<span class="diff-added">+     grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(n - 1, n - 1)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 10 items

test_app.py ..........                                                   [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     22     84      8    91%
test_app.py     122     10      2      0    92%
-----------------------------------------------
TOTAL           380     32     86      8    91%
Coverage XML written to file coverage.xml


============================== 10 passed in 0.17s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_larger_grid():
    n = 11
    grid = [[0 for _ in range(n)] for _ in range(n)]
    start = Node(0, 0)
    goal = Node(n - 1, n - 1)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ import math</span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_c_obstacle():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[1][0] = 1  # obstacle</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-added">+     s1 = Node(1, 0)</span>
<span class="diff-added">+     s2 = Node(2, 0)</span>
<span class="diff-added">+     cost = planner.C(s1, s2)</span>
<span class="diff-added">+     assert cost == math.inf</span>
<span class="diff-added">+     s1 = Node(0,0)</span>
<span class="diff-added">+     s2 = Node(1,0)</span>
<span class="diff-added">+     grid[1][0] = 1</span>
<span class="diff-added">+     cost = planner.C(s1,s2)</span>
<span class="diff-added">+     assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 10 items

test_app.py ..........                                                   [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     23     84      9    91%
test_app.py     128     15      2      0    88%
-----------------------------------------------
TOTAL           386     38     86      9    90%
Coverage XML written to file coverage.xml


============================== 10 passed in 0.18s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">import math
from app import LPAStar, Node

def test_c_obstacle():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    grid[1][0] = 1  # obstacle
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.motions = [Node(1, 0, cost=1.0)]
    s1 = Node(1, 0)
    s2 = Node(2, 0)
    cost = planner.C(s1, s2)
    assert cost == math.inf
    s1 = Node(0,0)
    s2 = Node(1,0)
    grid[1][0] = 1
    cost = planner.C(s1,s2)
    assert cost == math.inf
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">import math
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_no_dynamic_obstacles():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(False, {})</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 11 items

test_app.py ...........                                                  [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     22     84      8    91%
test_app.py     122      0      2      0   100%
-----------------------------------------------
TOTAL           380     22     86      8    94%
Coverage XML written to file coverage.xml


============================== 11 passed in 0.17s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_no_dynamic_obstacles():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    planner.set_dynamic_obstacles(False, {})
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_create_random_obstacles():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 2</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(True, {})</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 11 items

test_app.py ...........                                                  [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     23     84      8    91%
test_app.py     122      0      2      0   100%
-----------------------------------------------
TOTAL           380     23     86      8    93%
Coverage XML written to file coverage.xml


============================== 11 passed in 0.20s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_create_random_obstacles():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 2
    planner.set_dynamic_obstacles(True, {})
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LazyPQ, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazypq_insert_remove_clear():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node = Node(0, 0)</span>
<span class="diff-added">+     pq.insert(node, (1, 1))</span>
<span class="diff-added">+     pq.remove(node)</span>
<span class="diff-added">+     assert node not in pq.entry_finder</span>
<span class="diff-added">+     pq.clear()</span>
<span class="diff-added">+     assert pq.empty()</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 11 items

test_app.py ...........                                                  [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     22     84      8    91%
test_app.py     119      0      2      0   100%
-----------------------------------------------
TOTAL           377     22     86      8    94%
Coverage XML written to file coverage.xml


============================== 11 passed in 0.20s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LazyPQ, Node

def test_lazypq_insert_remove_clear():
    pq = LazyPQ()
    node = Node(0, 0)
    pq.insert(node, (1, 1))
    pq.remove(node)
    assert node not in pq.entry_finder
    pq.clear()
    assert pq.empty()
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_no_valid_predecessor():</span>
<span class="diff-added">+     # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-added">+     grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[0][0] = 0  # Start is free</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 10 items

test_app.py ..........                                                   [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     23     84      9    91%
test_app.py     121      9      2      0    93%
-----------------------------------------------
TOTAL           379     32     86      9    91%
Coverage XML written to file coverage.xml


============================== 10 passed in 0.19s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_no_valid_predecessor():
    # Create a 5x5 grid with obstacles blocking all paths except the start.
    grid = [[1 for _ in range(5)] for _ in range(5)]
    grid[0][0] = 0  # Start is free
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    # Expect no path to be found since the goal is unreachable.
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_clear_path_display_obstacle():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     path = [Node(1, 1), Node(2, 2)]</span>
<span class="diff-added">+     grid[1][1] = 1  # Mark (1,1) as an obstacle</span>
<span class="diff-added">+     planner.grid = grid</span>
<span class="diff-added">+     planner.start = start # set start node</span>
<span class="diff-added">+     planner.clear_path_display(path)</span>
<span class="diff-added">+     assert planner.grid[1][1] == 1</span>
<span class="diff-added">+     assert planner.grid[2][2] == 2</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 11 items

test_app.py ..F........                                                  [100%]

=================================== FAILURES ===================================
_______________________ test_clear_path_display_obstacle _______________________

    def test_clear_path_display_obstacle():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        planner = LPAStar(grid)
        path = [Node(1, 1), Node(2, 2)]
        grid[1][1] = 1  # Mark (1,1) as an obstacle
        planner.grid = grid
        planner.start = start # set start node
        planner.clear_path_display(path)
>       assert planner.grid[1][1] == 1
E       assert 2 == 1

test_app.py:58: AssertionError

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     22     84      8    91%
test_app.py     123      1      2      0    99%
-----------------------------------------------
TOTAL           381     23     86      8    93%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_clear_path_display_obstacle - assert 2 == 1
========================= 1 failed, 10 passed in 0.23s =========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_clear_path_display_obstacle():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    path = [Node(1, 1), Node(2, 2)]
    grid[1][1] = 1  # Mark (1,1) as an obstacle
    planner.grid = grid
    planner.start = start # set start node
    planner.clear_path_display(path)
    assert planner.grid[1][1] == 1
    assert planner.grid[2][2] == 2
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-added">+     assert found is False</span>
<span class="diff-added">+     assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_no_valid_predecessor():</span>
<span class="diff-added">+     # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-added">+     grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     grid[0][0] = 0  # Start is free</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 10 items

test_app.py ..........                                                   [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     22     84      8    91%
test_app.py     121      9      2      0    93%
-----------------------------------------------
TOTAL           379     31     86      8    92%
Coverage XML written to file coverage.xml


============================== 10 passed in 0.19s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_no_valid_predecessor():
    # Create a 5x5 grid with obstacles blocking all paths except the start.
    grid = [[1 for _ in range(5)] for _ in range(5)]
    grid[0][0] = 0  # Start is free
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    found, path = planner.plan(start, goal)
    # Expect no path to be found since the goal is unreachable.
    assert found is False
    assert path == []
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LazyPQ, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazypq_insert_remove_clear():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node = Node(0, 0)</span>
<span class="diff-added">+     pq.insert(node, (1, 1))</span>
<span class="diff-added">+     pq.remove(node)</span>
<span class="diff-added">+     assert node not in pq.entry_finder</span>
<span class="diff-added">+     pq.clear()</span>
<span class="diff-added">+     assert pq.empty()</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 11 items

test_app.py ...........                                                  [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     23     84      9    91%
test_app.py     130      9      2      0    93%
-----------------------------------------------
TOTAL           388     32     86      9    91%
Coverage XML written to file coverage.xml


============================== 11 passed in 0.24s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LazyPQ, Node

def test_lazypq_insert_remove_clear():
    pq = LazyPQ()
    node = Node(0, 0)
    pq.insert(node, (1, 1))
    pq.remove(node)
    assert node not in pq.entry_finder
    pq.clear()
    assert pq.empty()
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_no_dynamic_obstacles():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 1</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(False, {})</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 11 items

test_app.py ...........                                                  [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     23     84      8    91%
test_app.py     133      9      2      0    93%
-----------------------------------------------
TOTAL           391     32     86      8    92%
Coverage XML written to file coverage.xml


============================== 11 passed in 0.18s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_no_dynamic_obstacles():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 1
    planner.set_dynamic_obstacles(False, {})
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Coverage did not increase</td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_create_random_obstacles():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     planner.max_time_step = 2</span>
<span class="diff-added">+     planner.set_dynamic_obstacles(True, {})</span>
<span class="diff-added">+     found, path = planner.plan(start, goal)</span>
<span class="diff-added">+     assert found is True</span>
<span class="diff-added">+     assert path[-1] == start</span>
<span class="diff-added">+     assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 11 items

test_app.py ...........                                                  [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     23     84      9    91%
test_app.py     133      9      2      0    93%
-----------------------------------------------
TOTAL           391     32     86      9    91%
Coverage XML written to file coverage.xml


============================== 11 passed in 0.21s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_create_random_obstacles():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    planner.max_time_step = 2
    planner.set_dynamic_obstacles(True, {})
    found, path = planner.plan(start, goal)
    assert found is True
    assert path[-1] == start
    assert compare_coordinates(path[0], goal)
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-PASS">PASS</td>
                <td></td>
                <td>0</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LazyPQ, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_lazypq_insert_remove_clear():</span>
<span class="diff-added">+     pq = LazyPQ()</span>
<span class="diff-added">+     node = Node(0, 0)</span>
<span class="diff-added">+     pq.insert(node, (1, 1))</span>
<span class="diff-added">+     pq.remove(node)</span>
<span class="diff-added">+     assert node not in pq.entry_finder</span>
<span class="diff-added">+     pq.clear()</span>
<span class="diff-added">+     assert pq.empty()</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 11 items

test_app.py ...........                                                  [100%]

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     22     84      8    91%
test_app.py     130      9      2      0    93%
-----------------------------------------------
TOTAL           388     31     86      8    92%
Coverage XML written to file coverage.xml


============================== 11 passed in 0.18s ==============================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LazyPQ, Node

def test_lazypq_insert_remove_clear():
    pq = LazyPQ()
    node = Node(0, 0)
    pq.insert(node, (1, 1))
    pq.remove(node)
    assert node not in pq.entry_finder
    pq.clear()
    assert pq.empty()
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
            <tr>
                <td class="status-FAIL">FAIL</td>
                <td>Test failed</td>
                <td>1</td>
                <td>python</td>
                <td>
                    <details>
                        <summary>View Full Code</summary>
                        <pre><code><span class="diff-unchanged">  #!/usr/bin/env python3</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  Unit tests for the LPAStar planner using pytest.</span>
<span class="diff-unchanged">  Two tests are provided:</span>
<span class="diff-unchanged">    - test_path_found: a clear grid where a valid path is expected.</span>
<span class="diff-unchanged">    - test_no_path: a grid blocked by obstacles where no valid path exists.</span>
<span class="diff-unchanged">  """</span>
<span class="diff-unchanged">  from app import LPAStar, Node, check_outside_boundary, compare_coordinates</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  # For testing purposes, we override the sleep to avoid delays.</span>
<span class="diff-unchanged">  import time</span>
<span class="diff-unchanged">  time.sleep = lambda s: None  # disable sleep during tests</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_path_found():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with no obstacles.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      # For faster testing, reduce the number of iterations.</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Assert that a path was found.</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      # Check that the path starts at the start node.</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      # Check that the last node in the path matches the goal (by coordinates).</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_path():</span>
<span class="diff-unchanged">      # Create a 5x5 grid.</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      # Place a vertical wall of obstacles in column 2.</span>
<span class="diff-unchanged">      for i in range(5):</span>
<span class="diff-unchanged">          grid[i][2] = 1</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1  # limit iterations for testing</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # With a full wall between start and goal, no path should be found.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ </span>
<span class="diff-added">+ from app import LPAStar, Node</span>
<span class="diff-added">+ </span>
<span class="diff-added">+ def test_clear_path_display_obstacle():</span>
<span class="diff-added">+     grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-added">+     start = Node(0, 0)</span>
<span class="diff-added">+     goal = Node(4, 4)</span>
<span class="diff-added">+     planner = LPAStar(grid)</span>
<span class="diff-added">+     path = [Node(1, 1), Node(2, 2)]</span>
<span class="diff-added">+     grid[1][1] = 1  # Mark (1,1) as an obstacle</span>
<span class="diff-added">+     planner.grid = grid</span>
<span class="diff-added">+     planner.start = start # set start node</span>
<span class="diff-added">+     planner.clear_path_display(path)</span>
<span class="diff-added">+     assert planner.grid[1][1] == 1</span>
<span class="diff-added">+     assert planner.grid[2][2] == 2</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LazyPQ, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_insert_remove_clear():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      node = Node(0, 0)</span>
<span class="diff-unchanged">      pq.insert(node, (1, 1))</span>
<span class="diff-unchanged">      pq.remove(node)</span>
<span class="diff-unchanged">      assert node not in pq.entry_finder</span>
<span class="diff-unchanged">      pq.clear()</span>
<span class="diff-unchanged">      assert pq.empty()</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_no_valid_predecessor():</span>
<span class="diff-unchanged">      # Create a 5x5 grid with obstacles blocking all paths except the start.</span>
<span class="diff-unchanged">      grid = [[1 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[0][0] = 0  # Start is free</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      # Expect no path to be found since the goal is unreachable.</span>
<span class="diff-unchanged">      assert found is False</span>
<span class="diff-unchanged">      assert path == []</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import make_grid</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_make_grid():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      make_grid(grid)</span>
<span class="diff-unchanged">      assert True</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_larger_grid():</span>
<span class="diff-unchanged">      n = 11</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(n)] for _ in range(n)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(n - 1, n - 1)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import math</span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_c_obstacle():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      grid[1][0] = 1  # obstacle</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.motions = [Node(1, 0, cost=1.0)]</span>
<span class="diff-unchanged">      s1 = Node(1, 0)</span>
<span class="diff-unchanged">      s2 = Node(2, 0)</span>
<span class="diff-unchanged">      cost = planner.C(s1, s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">      s1 = Node(0,0)</span>
<span class="diff-unchanged">      s2 = Node(1,0)</span>
<span class="diff-unchanged">      grid[1][0] = 1</span>
<span class="diff-unchanged">      cost = planner.C(s1,s2)</span>
<span class="diff-unchanged">      assert cost == math.inf</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import print_path, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_print_path():</span>
<span class="diff-unchanged">      path = [Node(0, 0), Node(1, 1), Node(2, 2)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(2, 2)</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      print_path(path, start, goal, grid)</span>
<span class="diff-unchanged">      assert True  # Just check that it runs without errors</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_same_start_goal():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(0, 0)</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 1</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path == [start]</span>
<span class="diff-unchanged">      assert len(path) == 1</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  from app import LPAStar, Node</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_dynamic_obstacles():</span>
<span class="diff-unchanged">      grid = [[0 for _ in range(5)] for _ in range(5)]</span>
<span class="diff-unchanged">      start = Node(0, 0)</span>
<span class="diff-unchanged">      goal = Node(4, 4)</span>
<span class="diff-unchanged">      time_discovered_obstacles = {</span>
<span class="diff-unchanged">          1: [Node(1, 1)],</span>
<span class="diff-unchanged">          2: [Node(2, 2)]</span>
<span class="diff-unchanged">      }</span>
<span class="diff-unchanged">      planner = LPAStar(grid)</span>
<span class="diff-unchanged">      planner.max_time_step = 3</span>
<span class="diff-unchanged">      planner.set_dynamic_obstacles(True, time_discovered_obstacles)</span>
<span class="diff-unchanged">      found, path = planner.plan(start, goal)</span>
<span class="diff-unchanged">      assert found is True</span>
<span class="diff-unchanged">      assert path[-1] == start</span>
<span class="diff-unchanged">      assert compare_coordinates(path[0], goal)</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  import pytest</span>
<span class="diff-unchanged">  from app import LazyPQ</span>
<span class="diff-unchanged">  </span>
<span class="diff-unchanged">  def test_lazypq_top_pop_empty():</span>
<span class="diff-unchanged">      pq = LazyPQ()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.top()</span>
<span class="diff-unchanged">      with pytest.raises(KeyError):</span>
<span class="diff-unchanged">          pq.pop()</span></code></pre>
                    </details>
                </td>
                <td>
                    <details>
                        <summary>View More</summary>
                        <div><strong>STDERR:</strong> <pre><code class="language-python"></code></pre></div>
                        <div><strong>STDOUT:</strong> <pre><code class="language-python">============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.4, pluggy-1.5.0
rootdir: /home/thiuquan/code/maude/cover-agent/lpastar
plugins: anyio-4.8.0, cov-6.0.0
collected 12 items

test_app.py ..F.........                                                 [100%]

=================================== FAILURES ===================================
_______________________ test_clear_path_display_obstacle _______________________

    def test_clear_path_display_obstacle():
        grid = [[0 for _ in range(5)] for _ in range(5)]
        start = Node(0, 0)
        goal = Node(4, 4)
        planner = LPAStar(grid)
        path = [Node(1, 1), Node(2, 2)]
        grid[1][1] = 1  # Mark (1,1) as an obstacle
        planner.grid = grid
        planner.start = start # set start node
        planner.clear_path_display(path)
>       assert planner.grid[1][1] == 1
E       assert 2 == 1

test_app.py:58: AssertionError

---------- coverage: platform linux, python 3.10.12-final-0 ----------
Name          Stmts   Miss Branch BrPart  Cover
-----------------------------------------------
app.py          258     22     84      8    91%
test_app.py     143     10      2      0    93%
-----------------------------------------------
TOTAL           401     32     86      8    92%
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED test_app.py::test_clear_path_display_obstacle - assert 2 == 1
========================= 1 failed, 11 passed in 0.21s =========================
</code></pre></div>
                        <div><strong>Test Code:</strong> <pre><code class="language-python">from app import LPAStar, Node

def test_clear_path_display_obstacle():
    grid = [[0 for _ in range(5)] for _ in range(5)]
    start = Node(0, 0)
    goal = Node(4, 4)
    planner = LPAStar(grid)
    path = [Node(1, 1), Node(2, 2)]
    grid[1][1] = 1  # Mark (1,1) as an obstacle
    planner.grid = grid
    planner.start = start # set start node
    planner.clear_path_display(path)
    assert planner.grid[1][1] == 1
    assert planner.grid[2][2] == 2
</code></pre></div>
                        <div><strong>Imports:</strong> <pre><code class="language-python">""
</code></pre></div>
                    </details>
                </td>
            </tr>
            
        </table>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js"></script>
    </body>
    </html>
    